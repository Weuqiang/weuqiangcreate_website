# 

## 



1. **ES**tree shaking
2. **libCommonJS**babel-plugins-import
3. **distUMD**

## 

### 1. package.json

```json
{
  "name": "my-awesome-package",
  "version": "1.0.0",
  "description": "A brief description of your package",
  "main": "lib/index.js",
  "module": "es/index.js",
  "types": "lib/index.d.ts",
  "files": [
    "lib",
    "es",
    "dist",
    "README.md"
  ],
  "scripts": {
    "build": "npm run build:lib && npm run build:es && npm run build:dist",
    "build:lib": "babel src --out-dir lib --env-name lib",
    "build:es": "babel src --out-dir es --env-name es",
    "build:dist": "webpack --mode production",
    "prepublishOnly": "npm run build"
  },
  "keywords": ["javascript", "utility"],
  "author": "Your Name <your.email@example.com>",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/username/my-awesome-package.git"
  },
  "bugs": {
    "url": "https://github.com/username/my-awesome-package/issues"
  },
  "homepage": "https://github.com/username/my-awesome-package#readme"
}
```

### 2. .npmignore

```
src/
tests/
*.test.js
.babelrc
webpack.config.js
tsconfig.json
.eslintrc
.gitignore
.github/
docs/
examples/
```

### 3. README.md

README
- 
- 
- 
- API
- 
- 

## 

### Babel.babelrc

```json
{
  "env": {
    "lib": {
      "presets": [
        ["@babel/preset-env", {
          "modules": "cjs"
        }]
      ]
    },
    "es": {
      "presets": [
        ["@babel/preset-env", {
          "modules": false
        }]
      ]
    }
  }
}
```

### Webpackwebpack.config.js

```javascript
const path = require('path');

module.exports = {
  entry: './src/index.js',
  output: {
    path: path.resolve(__dirname, 'dist'),
    filename: 'index.js',
    library: 'MyAwesomePackage',
    libraryTarget: 'umd',
    globalObject: 'this'
  },
  module: {
    rules: [
      {
        test: /\.js$/,
        exclude: /node_modules/,
        use: {
          loader: 'babel-loader',
          options: {
            presets: ['@babel/preset-env']
          }
        }
      }
    ]
  }
};
```

## 

### 1. npm

```bash
npm login
```

### 2. 

```bash
npm view <package-name>
```

### 3. 

```bash
# bug
npm version patch

# 
npm version minor

# 
npm version major
```

### 4. 

```bash
# 
npm publish

# beta
npm publish --tag beta

# registry
npm publish --registry https://registry.npmjs.org/
```

## 

### 1. 

[Semantic Versioning](https://semver.org/)
- **MAJOR**API
- **MINOR**
- **PATCH**bug

### 2. npm scripts

```json
{
  "scripts": {
    "test": "jest",
    "lint": "eslint src/",
    "build": "npm run build:lib && npm run build:es && npm run build:dist",
    "prepublishOnly": "npm run test && npm run lint && npm run build",
    "postpublish": "git push && git push --tags"
  }
}
```

### 3. 

```bash
# alpha
npm publish --tag alpha

# beta
npm publish --tag beta

# betalatest
npm dist-tag add my-package@1.0.0-beta.1 latest
```

### 4. 

```bash
# 24
npm unpublish my-package@1.0.0

# 24
npm unpublish my-package --force

# 
npm deprecate my-package@1.0.0 "This version has been deprecated"
```

## 

### 1. npm

```bash
# scoped
npm publish --access restricted

# scoped
npm publish --access public
```

### 2. registry

```bash
# registry
npm config set registry https://your-private-registry.com/

# package.json
{
  "publishConfig": {
    "registry": "https://your-private-registry.com/"
  }
}
```

## 

### GitHub Actions

```yaml
name: Publish Package

on:
  push:
    tags:
      - 'v*'

jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
        with:
          node-version: '16'
          registry-url: 'https://registry.npmjs.org'
      - run: npm ci
      - run: npm test
      - run: npm run build
      - run: npm publish
        env:
          NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}
```

## 

### 1. 

```bash
npm view my-package
```

### 2. issuePR



### 3. 

```bash
npm audit
npm audit fix
```

### 4. 

READMECHANGELOGAPI