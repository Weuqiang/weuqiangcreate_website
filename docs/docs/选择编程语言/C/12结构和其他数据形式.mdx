---
sidebar_position: 12
title: 
---

## 

CPython-C
- 
- Python
- 

### 
```c
// 
struct Person {
    char name[50];
    int age;
    float height;
};

// typedef
typedef struct {
    char name[50];
    int age;
    float height;
} Person;

// 
Person p1;
Person *p2 = malloc(sizeof(Person));
```

### 
```c
// 
Person p1 = {"", 25, 175.5};
Person p2 = {.name = "", .age = 30, .height = 180.0};

// 
printf(": %s\n", p1.name);
printf(": %d\n", p1.age);

// 
Person *ptr = &p1;
printf(": %.1f\n", ptr->height);
```

### 
```c
typedef struct {
    int year;
    int month;
    int day;
} Date;

typedef struct {
    char name[50];
    Date birthdate;
    float salary;
} Employee;

Employee emp = {
    .name = "",
    .birthdate = {1990, 5, 15},
    .salary = 8000.0
};
```

## 

Python-C
- 
- 
- 

### 
```c
union Data {
    int i;
    float f;
    char str[20];
};

union Data data;
data.i = 10;
printf("data.i: %d\n", data.i);

data.f = 3.14;
printf("data.f: %.2f\n", data.f);
```

### 
```c
typedef struct {
    enum { INT, FLOAT, STRING } type;
    union {
        int i;
        float f;
        char str[20];
    } value;
} Variant;

Variant var;
var.type = INT;
var.value.i = 42;

if (var.type == INT) {
    printf(": %d\n", var.value.i);
}
```

## 



```c
typedef enum {
    RED,    // 0
    GREEN,  // 1
    BLUE    // 2
} Color;

Color c = GREEN;
if (c == GREEN) {
    printf("\n");
}
```

## Python-C

### Python
```c
// C
typedef struct {
    double x;
    double y;
} Point;

export Point* create_point(double x, double y) {
    Point *p = malloc(sizeof(Point));
    p->x = x;
    p->y = y;
    return p;
}

export double point_distance(Point *p1, Point *p2) {
    double dx = p1->x - p2->x;
    double dy = p1->y - p2->y;
    return sqrt(dx*dx + dy*dy);
}
```

```python
# Python
from ctypes import Structure, c_double, CDLL, POINTER

class Point(Structure):
    _fields_ = [("x", c_double), ("y", c_double)]

lib = CDLL('./geometry.so')
lib.create_point.argtypes = [c_double, c_double]
lib.create_point.restype = POINTER(Point)
lib.point_distance.argtypes = [POINTER(Point), POINTER(Point)]
lib.point_distance.restype = c_double

# 
p1 = lib.create_point(1.0, 2.0)
p2 = lib.create_point(4.0, 6.0)
distance = lib.point_distance(p1, p2)
print(f": {distance}")
```

### 
```c
// 
typedef struct {
    int width;
    int height;
    int channels;
    unsigned char *data;
} Image;

export void process_image(Image *img) {
    // 
    for (int i = 0; i < img->width * img->height * img->channels; i++) {
        img->data[i] = 255 - img->data[i]; // 
    }
}
```

## 

### 
```c
#include <stdio.h>

typedef struct {
    char a;     // 1
    int b;      // 4
    short c;    // 2
} Example;

int main() {
    printf("Sizeof Example: %zu\n", sizeof(Example));
    printf("Offset of a: %zu\n", offsetof(Example, a));
    printf("Offset of b: %zu\n", offsetof(Example, b));
    printf("Offset of c: %zu\n", offsetof(Example, c));
    return 0;
}
```

### 
```c
// 8
typedef struct __attribute__((aligned(8))) {
    char a;
    int b;
    short c;
} AlignedExample;
```

## 

1. **typedef**
2. ****
3. ****
4. ****
5. ****Python-C

## 

1. ****
2. ****
3. ****
4. ****CPython

CPython-C
