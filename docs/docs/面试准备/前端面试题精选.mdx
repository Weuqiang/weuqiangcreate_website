---
sidebar_position: 1
title: 
tags: [, , JavaScript, Vue, React]
---

# 

JavaScriptVueReact

## JavaScript

### 1. 

```javascript
// 7
const types = {
  number: 42,
  string: 'hello',
  boolean: true,
  undefined: undefined,
  null: null,
  symbol: Symbol('id'),
  bigint: 9007199254740991n
};

// 
const reference = {
  object: {},
  array: [],
  function: function() {},
  date: new Date(),
  regexp: /pattern/
};

// 
console.log(typeof 42);              // 'number'
console.log(typeof 'hello');         // 'string'
console.log(typeof true);            // 'boolean'
console.log(typeof undefined);       // 'undefined'
console.log(typeof null);            // 'object' (bug)
console.log(typeof Symbol('id'));    // 'symbol'
console.log(typeof 42n);             // 'bigint'

// 
function getType(value) {
  return Object.prototype.toString.call(value).slice(8, -1);
}

console.log(getType(null));          // 'Null'
console.log(getType([]));            // 'Array'
console.log(getType(new Date()));    // 'Date'
```

### 2. 

```javascript
/**
 * 
 */

// 
function createCounter() {
  let count = 0;
  
  return {
    increment() {
      return ++count;
    },
    decrement() {
      return --count;
    },
    getCount() {
      return count;
    }
  };
}

const counter = createCounter();
console.log(counter.increment()); // 1
console.log(counter.increment()); // 2
console.log(counter.getCount());  // 2

// 
for (var i = 0; i < 5; i++) {
  setTimeout(() => console.log(i), 1000); // 55
}

// 1let
for (let i = 0; i < 5; i++) {
  setTimeout(() => console.log(i), 1000); // 0,1,2,3,4
}

// 2
for (var i = 0; i < 5; i++) {
  (function(j) {
    setTimeout(() => console.log(j), 1000);
  })(i);
}

// 
const Module = (function() {
  let privateVar = 'private';
  
  function privateMethod() {
    console.log(privateVar);
  }
  
  return {
    publicMethod() {
      privateMethod();
    }
  };
})();
```

### 3. 

```javascript
/**
 * __proto__
 */

// 
function Person(name) {
  this.name = name;
}

Person.prototype.sayHello = function() {
  console.log(`Hello, I'm ${this.name}`);
};

const person = new Person('John');

// 
console.log(person.__proto__ === Person.prototype);           // true
console.log(Person.prototype.__proto__ === Object.prototype); // true
console.log(Object.prototype.__proto__);                      // null

// instanceof
function myInstanceof(obj, constructor) {
  let proto = obj.__proto__;
  
  while (proto) {
    if (proto === constructor.prototype) {
      return true;
    }
    proto = proto.__proto__;
  }
  
  return false;
}

// 
// 1. 
function Parent() {
  this.name = 'parent';
}

function Child() {}
Child.prototype = new Parent();

// 2. 
function Child() {
  Parent.call(this);
}

// 3. 
function Child(name) {
  Parent.call(this, name);
}
Child.prototype = new Parent();
Child.prototype.constructor = Child;

// 4. 
function Child(name) {
  Parent.call(this, name);
}
Child.prototype = Object.create(Parent.prototype);
Child.prototype.constructor = Child;

// 5. ES6 Class
class Parent {
  constructor(name) {
    this.name = name;
  }
  
  sayHello() {
    console.log(`Hello, I'm ${this.name}`);
  }
}

class Child extends Parent {
  constructor(name, age) {
    super(name);
    this.age = age;
  }
}
```

### 4. this

```javascript
/**
 * this
 */

// 1. undefined
function foo() {
  console.log(this);
}
foo(); // window ()  global (Node.js)

// 2. 
const obj = {
  name: 'obj',
  foo() {
    console.log(this.name);
  }
};
obj.foo(); // 'obj'

// 
const bar = obj.foo;
bar(); // undefined

// 3. callapplybind
function greet(greeting) {
  console.log(`${greeting}, ${this.name}`);
}

const person = { name: 'John' };
greet.call(person, 'Hello');    // 'Hello, John'
greet.apply(person, ['Hi']);    // 'Hi, John'
const boundGreet = greet.bind(person);
boundGreet('Hey');              // 'Hey, John'

// 4. new
function Person(name) {
  this.name = name;
}
const p = new Person('John');
console.log(p.name); // 'John'

// 5. this
const obj2 = {
  name: 'obj2',
  foo: () => {
    console.log(this.name);
  },
  bar() {
    const arrow = () => {
      console.log(this.name);
    };
    arrow();
  }
};
obj2.foo(); // undefined (this)
obj2.bar(); // 'obj2' (barthis)

// bind
Function.prototype.myBind = function(context, ...args) {
  const fn = this;
  
  return function(...newArgs) {
    return fn.apply(context, [...args, ...newArgs]);
  };
};
```

### 5. 

```javascript
/**
 * Promiseasync/await
 */

// Promise
const promise = new Promise((resolve, reject) => {
  setTimeout(() => {
    resolve('success');
  }, 1000);
});

promise
  .then(result => console.log(result))
  .catch(error => console.error(error));

// Promise
fetch('/api/user')
  .then(response => response.json())
  .then(user => fetch(`/api/posts/${user.id}`))
  .then(response => response.json())
  .then(posts => console.log(posts))
  .catch(error => console.error(error));

// async/await
async function fetchUserPosts() {
  try {
    const userResponse = await fetch('/api/user');
    const user = await userResponse.json();
    
    const postsResponse = await fetch(`/api/posts/${user.id}`);
    const posts = await postsResponse.json();
    
    return posts;
  } catch (error) {
    console.error(error);
  }
}

// 
async function fetchAll() {
  const [users, posts, comments] = await Promise.all([
    fetch('/api/users').then(r => r.json()),
    fetch('/api/posts').then(r => r.json()),
    fetch('/api/comments').then(r => r.json())
  ]);
  
  return { users, posts, comments };
}

// Promise
class MyPromise {
  constructor(executor) {
    this.state = 'pending';
    this.value = undefined;
    this.callbacks = [];
    
    const resolve = (value) => {
      if (this.state === 'pending') {
        this.state = 'fulfilled';
        this.value = value;
        this.callbacks.forEach(cb => cb.onFulfilled(value));
      }
    };
    
    const reject = (reason) => {
      if (this.state === 'pending') {
        this.state = 'rejected';
        this.value = reason;
        this.callbacks.forEach(cb => cb.onRejected(reason));
      }
    };
    
    try {
      executor(resolve, reject);
    } catch (error) {
      reject(error);
    }
  }
  
  then(onFulfilled, onRejected) {
    return new MyPromise((resolve, reject) => {
      const handle = () => {
        if (this.state === 'fulfilled') {
          try {
            const result = onFulfilled(this.value);
            resolve(result);
          } catch (error) {
            reject(error);
          }
        } else if (this.state === 'rejected') {
          try {
            const result = onRejected(this.value);
            resolve(result);
          } catch (error) {
            reject(error);
          }
        }
      };
      
      if (this.state === 'pending') {
        this.callbacks.push({
          onFulfilled: () => handle(),
          onRejected: () => handle()
        });
      } else {
        handle();
      }
    });
  }
}
```

## Vue

### 1. 

```javascript
/**
 * Vue2Object.defineProperty
 * Vue3Proxy
 */

// Vue2
function defineReactive(obj, key, val) {
  const dep = new Dep();
  
  Object.defineProperty(obj, key, {
    get() {
      if (Dep.target) {
        dep.depend();
      }
      return val;
    },
    set(newVal) {
      if (newVal !== val) {
        val = newVal;
        dep.notify();
      }
    }
  });
}

class Dep {
  constructor() {
    this.subs = [];
  }
  
  depend() {
    if (Dep.target) {
      this.subs.push(Dep.target);
    }
  }
  
  notify() {
    this.subs.forEach(sub => sub.update());
  }
}

// Vue3
function reactive(obj) {
  return new Proxy(obj, {
    get(target, key) {
      track(target, key);
      return target[key];
    },
    set(target, key, value) {
      target[key] = value;
      trigger(target, key);
      return true;
    }
  });
}

const targetMap = new WeakMap();

function track(target, key) {
  if (!activeEffect) return;
  
  let depsMap = targetMap.get(target);
  if (!depsMap) {
    targetMap.set(target, (depsMap = new Map()));
  }
  
  let dep = depsMap.get(key);
  if (!dep) {
    depsMap.set(key, (dep = new Set()));
  }
  
  dep.add(activeEffect);
}

function trigger(target, key) {
  const depsMap = targetMap.get(target);
  if (!depsMap) return;
  
  const dep = depsMap.get(key);
  if (dep) {
    dep.forEach(effect => effect());
  }
}
```

### 2. DOMDiff

```javascript
/**
 * DOMJavaScriptDOM
 */

// 
function h(tag, props, children) {
  return {
    tag,
    props,
    children
  };
}

// 
function render(vnode) {
  if (typeof vnode === 'string') {
    return document.createTextNode(vnode);
  }
  
  const el = document.createElement(vnode.tag);
  
  // 
  if (vnode.props) {
    for (const [key, value] of Object.entries(vnode.props)) {
      el.setAttribute(key, value);
    }
  }
  
  // 
  if (vnode.children) {
    vnode.children.forEach(child => {
      el.appendChild(render(child));
    });
  }
  
  return el;
}

// Diff
function diff(oldVNode, newVNode) {
  // 
  if (oldVNode.tag !== newVNode.tag) {
    return { type: 'REPLACE', newVNode };
  }
  
  // 
  if (typeof newVNode === 'string') {
    if (oldVNode !== newVNode) {
      return { type: 'TEXT', text: newVNode };
    }
    return null;
  }
  
  // 
  const propsPatches = diffProps(oldVNode.props, newVNode.props);
  
  // 
  const childrenPatches = diffChildren(oldVNode.children, newVNode.children);
  
  return {
    type: 'UPDATE',
    props: propsPatches,
    children: childrenPatches
  };
}
```

### 3. 

```javascript
/**
 * Vue
 */

// 1. Props / Emit
// Parent.vue
export default {
  template: `
    <Child :message="msg" @update="handleUpdate" />
  `,
  data() {
    return { msg: 'Hello' };
  },
  methods: {
    handleUpdate(newMsg) {
      this.msg = newMsg;
    }
  }
};

// Child.vue
export default {
  props: ['message'],
  methods: {
    updateMessage() {
      this.$emit('update', 'New message');
    }
  }
};

// 2. EventBus
const EventBus = new Vue();

// 
EventBus.$emit('event-name', data);

// 
EventBus.$on('event-name', (data) => {
  console.log(data);
});

// 3. Vuex
const store = new Vuex.Store({
  state: {
    count: 0
  },
  mutations: {
    increment(state) {
      state.count++;
    }
  },
  actions: {
    incrementAsync({ commit }) {
      setTimeout(() => {
        commit('increment');
      }, 1000);
    }
  }
});

// 4. Provide / Inject
// Parent.vue
export default {
  provide() {
    return {
      theme: 'dark'
    };
  }
};

// Child.vue
export default {
  inject: ['theme']
};
```

## React

### 1. 

```javascript
/**
 * React
 */

class Component extends React.Component {
  // 
  constructor(props) {
    super(props);
    this.state = { count: 0 };
  }
  
  static getDerivedStateFromProps(props, state) {
    // propsstate
    return null;
  }
  
  componentDidMount() {
    // 
    // 
  }
  
  // 
  shouldComponentUpdate(nextProps, nextState) {
    // 
    return true;
  }
  
  getSnapshotBeforeUpdate(prevProps, prevState) {
    // 
    return null;
  }
  
  componentDidUpdate(prevProps, prevState, snapshot) {
    // 
  }
  
  // 
  componentWillUnmount() {
    // 
    // 
  }
  
  // 
  static getDerivedStateFromError(error) {
    return { hasError: true };
  }
  
  componentDidCatch(error, info) {
    console.error(error, info);
  }
  
  render() {
    return <div>{this.state.count}</div>;
  }
}
```

### 2. Hooks

```javascript
/**
 * React Hooks
 */

// useState
function Counter() {
  const [count, setCount] = useState(0);
  
  return (
    <div>
      <p>{count}</p>
      <button onClick={() => setCount(count + 1)}>+1</button>
    </div>
  );
}

// useEffect
function DataFetcher() {
  const [data, setData] = useState(null);
  
  useEffect(() => {
    fetch('/api/data')
      .then(r => r.json())
      .then(setData);
    
    // 
    return () => {
      // 
    };
  }, []); // 
  
  return <div>{data}</div>;
}

// useContext
const ThemeContext = React.createContext('light');

function ThemedButton() {
  const theme = useContext(ThemeContext);
  return <button className={theme}>Button</button>;
}

// useReducer
function reducer(state, action) {
  switch (action.type) {
    case 'increment':
      return { count: state.count + 1 };
    case 'decrement':
      return { count: state.count - 1 };
    default:
      return state;
  }
}

function Counter() {
  const [state, dispatch] = useReducer(reducer, { count: 0 });
  
  return (
    <div>
      <p>{state.count}</p>
      <button onClick={() => dispatch({ type: 'increment' })}>+</button>
      <button onClick={() => dispatch({ type: 'decrement' })}>-</button>
    </div>
  );
}

// Hook
function useLocalStorage(key, initialValue) {
  const [value, setValue] = useState(() => {
    const item = localStorage.getItem(key);
    return item ? JSON.parse(item) : initialValue;
  });
  
  useEffect(() => {
    localStorage.setItem(key, JSON.stringify(value));
  }, [key, value]);
  
  return [value, setValue];
}
```

## 


-  **JavaScript**this
-  **Vue**DOM
-  **React**Hooks
-  ****
-  ****
-  ****WebpackViteCI/CD

**API**

