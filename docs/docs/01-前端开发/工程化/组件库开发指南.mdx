---
sidebar_position: 3
title: 
tags: [, Monorepo, Storybook, ]
---

# 

## 

 UI 

### 

- ****
- ****
- ****
- ****

## 

### 1. 

```bash
# Vite - 
npm create vite@latest my-ui-library -- --template react-ts

# Rollup - 
npm install -D rollup @rollup/plugin-node-resolve @rollup/plugin-commonjs
```

### 2. 

```bash
# CSS-in-JS
npm install styled-components

# CSS Modules
# Vite 

# Less/Sass
npm install -D less sass
```

### 3. 

```bash
# Storybook - 
npx storybook@latest init

# VitePress - 
npm install -D vitepress
```

## 

### 1.  Monorepo 

```bash
my-ui-library/
 packages/
    components/        # 
    utils/            # 
    hooks/            # React Hooks
    theme/            # 
 docs/                 # 
 examples/             # 
 scripts/              # 
 package.json
 pnpm-workspace.yaml
 tsconfig.json
```

```yaml
# pnpm-workspace.yaml
packages:
  - 'packages/*'
  - 'docs'
  - 'examples/*'
```

### 2.  TypeScript

```json
// tsconfig.json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "jsx": "react-jsx",
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true,
    "outDir": "./dist",
    "moduleResolution": "node",
    "allowSyntheticDefaultImports": true,
    "esModuleInterop": true,
    "strict": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true
  },
  "include": ["packages/**/*"],
  "exclude": ["node_modules", "dist"]
}
```

### 3. 

```javascript
// rollup.config.js
import resolve from '@rollup/plugin-node-resolve';
import commonjs from '@rollup/plugin-commonjs';
import typescript from '@rollup/plugin-typescript';
import { terser } from 'rollup-plugin-terser';
import postcss from 'rollup-plugin-postcss';

export default {
  input: 'packages/components/index.ts',
  output: [
    {
      file: 'dist/index.esm.js',
      format: 'esm',
      sourcemap: true,
    },
    {
      file: 'dist/index.cjs.js',
      format: 'cjs',
      sourcemap: true,
    },
    {
      file: 'dist/index.umd.js',
      format: 'umd',
      name: 'MyUI',
      sourcemap: true,
      globals: {
        react: 'React',
        'react-dom': 'ReactDOM',
      },
    },
  ],
  external: ['react', 'react-dom'],
  plugins: [
    resolve(),
    commonjs(),
    typescript({
      tsconfig: './tsconfig.json',
      declaration: true,
      declarationDir: 'dist/types',
    }),
    postcss({
      extract: true,
      minimize: true,
    }),
    terser(),
  ],
};
```

## 

### 1. Button 

```tsx
// packages/components/Button/Button.tsx
import React, { ButtonHTMLAttributes, ReactNode } from 'react';
import classNames from 'classnames';
import './Button.css';

export interface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {
  /**  */
  variant?: 'primary' | 'secondary' | 'danger' | 'ghost';
  /**  */
  size?: 'small' | 'medium' | 'large';
  /**  */
  block?: boolean;
  /**  */
  disabled?: boolean;
  /**  */
  loading?: boolean;
  /**  */
  icon?: ReactNode;
  /**  */
  children?: ReactNode;
}

export const Button: React.FC<ButtonProps> = ({
  variant = 'primary',
  size = 'medium',
  block = false,
  disabled = false,
  loading = false,
  icon,
  children,
  className,
  ...rest
}) => {
  const classes = classNames(
    'my-ui-button',
    `my-ui-button--${variant}`,
    `my-ui-button--${size}`,
    {
      'my-ui-button--block': block,
      'my-ui-button--loading': loading,
    },
    className
  );

  return (
    <button
      className={classes}
      disabled={disabled || loading}
      {...rest}
    >
      {loading && <span className="my-ui-button__spinner" />}
      {icon && <span className="my-ui-button__icon">{icon}</span>}
      {children && <span className="my-ui-button__text">{children}</span>}
    </button>
  );
};

Button.displayName = 'Button';
```

```css
/* packages/components/Button/Button.css */
.my-ui-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 8px 16px;
  border: none;
  border-radius: 4px;
  font-size: 14px;
  font-weight: 500;
  line-height: 1.5;
  cursor: pointer;
  transition: all 0.2s;
  user-select: none;
}

.my-ui-button:focus {
  outline: 2px solid var(--primary-color);
  outline-offset: 2px;
}

/*  */
.my-ui-button--primary {
  background: var(--primary-color);
  color: white;
}

.my-ui-button--primary:hover {
  background: var(--primary-color-hover);
}

.my-ui-button--secondary {
  background: var(--secondary-color);
  color: var(--text-color);
}

.my-ui-button--danger {
  background: var(--danger-color);
  color: white;
}

.my-ui-button--ghost {
  background: transparent;
  border: 1px solid var(--border-color);
  color: var(--text-color);
}

/*  */
.my-ui-button--small {
  padding: 4px 12px;
  font-size: 12px;
}

.my-ui-button--large {
  padding: 12px 24px;
  font-size: 16px;
}

/*  */
.my-ui-button--block {
  display: flex;
  width: 100%;
}

/*  */
.my-ui-button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/*  */
.my-ui-button--loading {
  pointer-events: none;
}

.my-ui-button__spinner {
  width: 14px;
  height: 14px;
  border: 2px solid currentColor;
  border-top-color: transparent;
  border-radius: 50%;
  animation: spin 0.6s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}
```

### 2. Input 

```tsx
// packages/components/Input/Input.tsx
import React, { InputHTMLAttributes, ReactNode, forwardRef } from 'react';
import classNames from 'classnames';
import './Input.css';

export interface InputProps extends InputHTMLAttributes<HTMLInputElement> {
  /**  */
  size?: 'small' | 'medium' | 'large';
  /**  */
  error?: boolean;
  /**  */
  errorMessage?: string;
  /**  */
  prefix?: ReactNode;
  /**  */
  suffix?: ReactNode;
  /**  */
  allowClear?: boolean;
  /**  */
  onClear?: () => void;
}

export const Input = forwardRef<HTMLInputElement, InputProps>(
  (
    {
      size = 'medium',
      error = false,
      errorMessage,
      prefix,
      suffix,
      allowClear = false,
      onClear,
      className,
      disabled,
      value,
      ...rest
    },
    ref
  ) => {
    const wrapperClasses = classNames(
      'my-ui-input-wrapper',
      `my-ui-input-wrapper--${size}`,
      {
        'my-ui-input-wrapper--error': error,
        'my-ui-input-wrapper--disabled': disabled,
      }
    );

    const inputClasses = classNames('my-ui-input', className);

    const showClear = allowClear && value && !disabled;

    return (
      <div className="my-ui-input-container">
        <div className={wrapperClasses}>
          {prefix && <span className="my-ui-input__prefix">{prefix}</span>}
          
          <input
            ref={ref}
            className={inputClasses}
            disabled={disabled}
            value={value}
            {...rest}
          />
          
          {showClear && (
            <button
              type="button"
              className="my-ui-input__clear"
              onClick={onClear}
            >
              ×
            </button>
          )}
          
          {suffix && <span className="my-ui-input__suffix">{suffix}</span>}
        </div>
        
        {error && errorMessage && (
          <div className="my-ui-input__error-message">{errorMessage}</div>
        )}
      </div>
    );
  }
);

Input.displayName = 'Input';
```

### 3. Modal 

```tsx
// packages/components/Modal/Modal.tsx
import React, { ReactNode, useEffect } from 'react';
import { createPortal } from 'react-dom';
import classNames from 'classnames';
import './Modal.css';

export interface ModalProps {
  /**  */
  visible: boolean;
  /**  */
  title?: ReactNode;
  /**  */
  children: ReactNode;
  /**  */
  footer?: ReactNode;
  /**  */
  width?: number | string;
  /**  */
  closable?: boolean;
  /**  */
  maskClosable?: boolean;
  /**  */
  onClose?: () => void;
  /**  */
  onOk?: () => void;
  /**  */
  onCancel?: () => void;
}

export const Modal: React.FC<ModalProps> = ({
  visible,
  title,
  children,
  footer,
  width = 520,
  closable = true,
  maskClosable = true,
  onClose,
  onOk,
  onCancel,
}) => {
  // 
  useEffect(() => {
    if (visible) {
      document.body.style.overflow = 'hidden';
    } else {
      document.body.style.overflow = '';
    }
    return () => {
      document.body.style.overflow = '';
    };
  }, [visible]);

  // ESC 
  useEffect(() => {
    const handleEsc = (e: KeyboardEvent) => {
      if (e.key === 'Escape' && visible && onClose) {
        onClose();
      }
    };
    document.addEventListener('keydown', handleEsc);
    return () => document.removeEventListener('keydown', handleEsc);
  }, [visible, onClose]);

  if (!visible) return null;

  const handleMaskClick = () => {
    if (maskClosable && onClose) {
      onClose();
    }
  };

  const modalContent = (
    <div className="my-ui-modal-root">
      <div className="my-ui-modal-mask" onClick={handleMaskClick} />
      
      <div className="my-ui-modal-wrapper">
        <div
          className="my-ui-modal"
          style={{ width }}
          onClick={(e) => e.stopPropagation()}
        >
          {closable && (
            <button className="my-ui-modal__close" onClick={onClose}>
              ×
            </button>
          )}
          
          {title && <div className="my-ui-modal__header">{title}</div>}
          
          <div className="my-ui-modal__body">{children}</div>
          
          {footer !== null && (
            <div className="my-ui-modal__footer">
              {footer || (
                <>
                  <button
                    className="my-ui-button my-ui-button--secondary"
                    onClick={onCancel || onClose}
                  >
                    
                  </button>
                  <button
                    className="my-ui-button my-ui-button--primary"
                    onClick={onOk}
                  >
                    
                  </button>
                </>
              )}
            </div>
          )}
        </div>
      </div>
    </div>
  );

  return createPortal(modalContent, document.body);
};

Modal.displayName = 'Modal';
```

## 

### 1. Design Tokens

```typescript
// packages/theme/tokens.ts
export const tokens = {
  // 
  colors: {
    primary: '#1890ff',
    primaryHover: '#40a9ff',
    primaryActive: '#096dd9',
    success: '#52c41a',
    warning: '#faad14',
    danger: '#ff4d4f',
    info: '#1890ff',
    
    // 
    gray1: '#ffffff',
    gray2: '#fafafa',
    gray3: '#f5f5f5',
    gray4: '#e8e8e8',
    gray5: '#d9d9d9',
    gray6: '#bfbfbf',
    gray7: '#8c8c8c',
    gray8: '#595959',
    gray9: '#262626',
    gray10: '#000000',
  },
  
  // 
  fonts: {
    family: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
    size: {
      xs: '12px',
      sm: '14px',
      md: '16px',
      lg: '18px',
      xl: '20px',
    },
    weight: {
      normal: 400,
      medium: 500,
      semibold: 600,
      bold: 700,
    },
  },
  
  // 
  spacing: {
    xs: '4px',
    sm: '8px',
    md: '16px',
    lg: '24px',
    xl: '32px',
  },
  
  // 
  radius: {
    sm: '2px',
    md: '4px',
    lg: '8px',
    xl: '16px',
    full: '9999px',
  },
  
  // 
  shadows: {
    sm: '0 1px 2px rgba(0, 0, 0, 0.05)',
    md: '0 4px 6px rgba(0, 0, 0, 0.1)',
    lg: '0 10px 15px rgba(0, 0, 0, 0.1)',
    xl: '0 20px 25px rgba(0, 0, 0, 0.15)',
  },
  
  // 
  transitions: {
    fast: '0.1s',
    normal: '0.2s',
    slow: '0.3s',
  },
};
```

### 2. CSS 

```css
/* packages/theme/variables.css */
:root {
  /*  */
  --primary-color: #1890ff;
  --primary-color-hover: #40a9ff;
  --primary-color-active: #096dd9;
  --success-color: #52c41a;
  --warning-color: #faad14;
  --danger-color: #ff4d4f;
  
  /*  */
  --text-color: rgba(0, 0, 0, 0.85);
  --text-color-secondary: rgba(0, 0, 0, 0.65);
  --text-color-disabled: rgba(0, 0, 0, 0.25);
  
  /*  */
  --border-color: #d9d9d9;
  --border-radius: 4px;
  
  /*  */
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 16px;
  --spacing-lg: 24px;
  --spacing-xl: 32px;
  
  /*  */
  --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-size-sm: 12px;
  --font-size-md: 14px;
  --font-size-lg: 16px;
  
  /*  */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
  
  /*  */
  --transition-fast: 0.1s;
  --transition-normal: 0.2s;
  --transition-slow: 0.3s;
}

/*  */
[data-theme='dark'] {
  --primary-color: #177ddc;
  --text-color: rgba(255, 255, 255, 0.85);
  --text-color-secondary: rgba(255, 255, 255, 0.65);
  --border-color: #434343;
}
```

### 3. 

```tsx
// packages/theme/ThemeProvider.tsx
import React, { createContext, useContext, useState, ReactNode } from 'react';
import { tokens } from './tokens';

interface ThemeContextValue {
  theme: 'light' | 'dark';
  toggleTheme: () => void;
  tokens: typeof tokens;
}

const ThemeContext = createContext<ThemeContextValue | undefined>(undefined);

export const ThemeProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  const [theme, setTheme] = useState<'light' | 'dark'>('light');

  const toggleTheme = () => {
    const newTheme = theme === 'light' ? 'dark' : 'light';
    setTheme(newTheme);
    document.documentElement.setAttribute('data-theme', newTheme);
  };

  return (
    <ThemeContext.Provider value={{ theme, toggleTheme, tokens }}>
      {children}
    </ThemeContext.Provider>
  );
};

export const useTheme = () => {
  const context = useContext(ThemeContext);
  if (!context) {
    throw new Error('useTheme must be used within ThemeProvider');
  }
  return context;
};
```

## 

### 1. Storybook 

```typescript
// .storybook/main.ts
import type { StorybookConfig } from '@storybook/react-vite';

const config: StorybookConfig = {
  stories: ['../packages/**/*.stories.@(js|jsx|ts|tsx)'],
  addons: [
    '@storybook/addon-links',
    '@storybook/addon-essentials',
    '@storybook/addon-interactions',
    '@storybook/addon-a11y',
  ],
  framework: {
    name: '@storybook/react-vite',
    options: {},
  },
};

export default config;
```

### 2.  Story

```tsx
// packages/components/Button/Button.stories.tsx
import type { Meta, StoryObj } from '@storybook/react';
import { Button } from './Button';

const meta: Meta<typeof Button> = {
  title: 'Components/Button',
  component: Button,
  tags: ['autodocs'],
  argTypes: {
    variant: {
      control: 'select',
      options: ['primary', 'secondary', 'danger', 'ghost'],
    },
    size: {
      control: 'select',
      options: ['small', 'medium', 'large'],
    },
  },
};

export default meta;
type Story = StoryObj<typeof Button>;

export const Primary: Story = {
  args: {
    variant: 'primary',
    children: 'Primary Button',
  },
};

export const Secondary: Story = {
  args: {
    variant: 'secondary',
    children: 'Secondary Button',
  },
};

export const WithIcon: Story = {
  args: {
    variant: 'primary',
    icon: '',
    children: 'With Icon',
  },
};

export const Loading: Story = {
  args: {
    variant: 'primary',
    loading: true,
    children: 'Loading',
  },
};

export const AllSizes: Story = {
  render: () => (
    <div style={{ display: 'flex', gap: '16px', alignItems: 'center' }}>
      <Button size="small">Small</Button>
      <Button size="medium">Medium</Button>
      <Button size="large">Large</Button>
    </div>
  ),
};
```

## 

### 1. 

```bash
npm install -D vitest @testing-library/react @testing-library/jest-dom
```

```typescript
// packages/components/Button/Button.test.tsx
import { describe, it, expect, vi } from 'vitest';
import { render, screen, fireEvent } from '@testing-library/react';
import { Button } from './Button';

describe('Button', () => {
  it('renders correctly', () => {
    render(<Button>Click me</Button>);
    expect(screen.getByText('Click me')).toBeInTheDocument();
  });

  it('handles click events', () => {
    const handleClick = vi.fn();
    render(<Button onClick={handleClick}>Click me</Button>);
    
    fireEvent.click(screen.getByText('Click me'));
    expect(handleClick).toHaveBeenCalledTimes(1);
  });

  it('disables when loading', () => {
    render(<Button loading>Click me</Button>);
    expect(screen.getByRole('button')).toBeDisabled();
  });

  it('applies correct variant class', () => {
    render(<Button variant="danger">Delete</Button>);
    expect(screen.getByRole('button')).toHaveClass('my-ui-button--danger');
  });
});
```

### 2. 

```typescript
// packages/components/Button/Button.a11y.test.tsx
import { describe, it } from 'vitest';
import { render } from '@testing-library/react';
import { axe, toHaveNoViolations } from 'jest-axe';
import { Button } from './Button';

expect.extend(toHaveNoViolations);

describe('Button Accessibility', () => {
  it('should not have accessibility violations', async () => {
    const { container } = render(<Button>Click me</Button>);
    const results = await axe(container);
    expect(results).toHaveNoViolations();
  });
});
```

## 

### 1. 

```json
// package.json
{
  "name": "@mycompany/ui",
  "version": "1.0.0",
  "scripts": {
    "build": "rollup -c",
    "test": "vitest",
    "lint": "eslint packages --ext .ts,.tsx",
    "format": "prettier --write \"packages/**/*.{ts,tsx}\"",
    "storybook": "storybook dev -p 6006",
    "build-storybook": "storybook build",
    "prepublishOnly": "npm run build && npm run test"
  }
}
```

### 2.  npm

```bash
#  npm
npm login

# 
npm publish --access public

#  changeset 
npx changeset
npx changeset version
npx changeset publish
```

### 3. CI/CD 

```yaml
# .github/workflows/publish.yml
name: Publish Package

on:
  push:
    branches:
      - main

jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
          registry-url: 'https://registry.npmjs.org'
      
      - run: npm ci
      - run: npm run build
      - run: npm run test
      
      - run: npm publish
        env:
          NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}
```

## 

### 1. 

- ****
- ****
- ****
- **** WCAG 

### 2. API 

```tsx
//   API 
<Button variant="primary" size="large" onClick={handleClick}>
  Submit
</Button>

//  
<Button isPrimary isLarge onClickHandler={handleClick}>
  Submit
</Button>
```

### 3. 

```tsx
//  React.memo 
export const Button = React.memo<ButtonProps>(({ children, ...props }) => {
  return <button {...props}>{children}</button>;
});

//  useMemo 
const classes = useMemo(
  () => classNames('button', `button--${variant}`),
  [variant]
);
```

## 



1. ****
2. **** API
3. ****
4. **** Storybook 
5. ****
6. ****

## 

- [Ant Design ](https://ant.design/docs/spec/introduce-cn)
- [Material Design](https://material.io/design)
- [Storybook ](https://storybook.js.org/)
- [React Aria](https://react-spectrum.adobe.com/react-aria/)

