---
sidebar_position: 6
title: TypeScript
tags: [, TypeScript, , ]
---

# TypeScript

TypeScriptJavaScriptTypeScript

## 

### 

```typescript
// Union Types
type Status = 'pending' | 'success' | 'error';
type ID = string | number;

function handleStatus(status: Status) {
  switch (status) {
    case 'pending':
      console.log('...');
      break;
    case 'success':
      console.log('');
      break;
    case 'error':
      console.log('');
      break;
  }
}

// Intersection Types
interface Person {
  name: string;
  age: number;
}

interface Employee {
  employeeId: string;
  department: string;
}

type Staff = Person & Employee;

const staff: Staff = {
  name: 'John',
  age: 30,
  employeeId: 'E001',
  department: 'IT'
};

// 
function isString(value: unknown): value is string {
  return typeof value === 'string';
}

function processValue(value: string | number) {
  if (isString(value)) {
    console.log(value.toUpperCase());
  } else {
    console.log(value.toFixed(2));
  }
}
```

### 

```typescript
// Partial - 
type Partial<T> = {
  [P in keyof T]?: T[P];
};

interface User {
  id: number;
  name: string;
  email: string;
}

type PartialUser = Partial<User>;
// { id?: number; name?: string; email?: string; }

// Required - 
type Required<T> = {
  [P in keyof T]-?: T[P];
};

// Readonly - 
type Readonly<T> = {
  readonly [P in keyof T]: T[P];
};

// Pick - 
type Pick<T, K extends keyof T> = {
  [P in K]: T[P];
};

type UserBasic = Pick<User, 'id' | 'name'>;
// { id: number; name: string; }

// Omit - 
type Omit<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>>;

type UserWithoutEmail = Omit<User, 'email'>;
// { id: number; name: string; }

// Record - 
type Record<K extends keyof any, T> = {
  [P in K]: T;
};

type PageInfo = Record<'home' | 'about' | 'contact', { title: string; url: string }>;

const pages: PageInfo = {
  home: { title: 'Home', url: '/' },
  about: { title: 'About', url: '/about' },
  contact: { title: 'Contact', url: '/contact' }
};
```

### 

```typescript
// 
type IsString<T> = T extends string ? true : false;

type A = IsString<string>;  // true
type B = IsString<number>;  // false

// 
type ToArray<T> = T extends any ? T[] : never;

type StrOrNumArray = ToArray<string | number>;
// string[] | number[]

// infer
type ReturnType<T> = T extends (...args: any[]) => infer R ? R : never;

function getUserInfo() {
  return { name: 'John', age: 30 };
}

type UserInfo = ReturnType<typeof getUserInfo>;
// { name: string; age: number; }

// Promise
type UnwrapPromise<T> = T extends Promise<infer U> ? U : T;

type Result = UnwrapPromise<Promise<string>>;  // string

// 
type NonNullable<T> = T extends null | undefined ? never : T;

type Value = string | null | undefined;
type NonNullValue = NonNullable<Value>;  // string

// 
type Parameters<T extends (...args: any) => any> = 
  T extends (...args: infer P) => any ? P : never;

function add(a: number, b: number) {
  return a + b;
}

type AddParams = Parameters<typeof add>;  // [number, number]
```

## 

### 

```typescript
// 
function identity<T>(arg: T): T {
  return arg;
}

const num = identity<number>(42);
const str = identity<string>('hello');

// 
interface Lengthwise {
  length: number;
}

function logLength<T extends Lengthwise>(arg: T): T {
  console.log(arg.length);
  return arg;
}

logLength('hello');        // 
logLength([1, 2, 3]);      // 
logLength({ length: 10 }); // 
// logLength(42);          //  

// 
function merge<T, U>(obj1: T, obj2: U): T & U {
  return { ...obj1, ...obj2 };
}

const result = merge(
  { name: 'John' },
  { age: 30 }
);
// { name: string; age: number; }

// 
function createArray<T = string>(length: number, value: T): T[] {
  return Array(length).fill(value);
}

const arr1 = createArray(3, 'x');     // string[]
const arr2 = createArray<number>(3, 0); // number[]
```

### 

```typescript
class GenericNumber<T> {
  zeroValue: T;
  add: (x: T, y: T) => T;
  
  constructor(zeroValue: T, add: (x: T, y: T) => T) {
    this.zeroValue = zeroValue;
    this.add = add;
  }
}

const myGenericNumber = new GenericNumber<number>(
  0,
  (x, y) => x + y
);

// 
interface Repository<T> {
  find(id: string): Promise<T>;
  findAll(): Promise<T[]>;
  create(item: T): Promise<T>;
  update(id: string, item: Partial<T>): Promise<T>;
  delete(id: string): Promise<void>;
}

class UserRepository implements Repository<User> {
  async find(id: string): Promise<User> {
    // 
  }
  
  async findAll(): Promise<User[]> {
    // 
  }
  
  async create(user: User): Promise<User> {
    // 
  }
  
  async update(id: string, user: Partial<User>): Promise<User> {
    // 
  }
  
  async delete(id: string): Promise<void> {
    // 
  }
}
```

## 

### 

```typescript
// 
function sealed(constructor: Function) {
  Object.seal(constructor);
  Object.seal(constructor.prototype);
}

@sealed
class Greeter {
  greeting: string;
  
  constructor(message: string) {
    this.greeting = message;
  }
}

// 
function Component(options: { selector: string; template: string }) {
  return function (constructor: Function) {
    constructor.prototype.selector = options.selector;
    constructor.prototype.template = options.template;
  };
}

@Component({
  selector: 'app-root',
  template: '<h1>Hello</h1>'
})
class AppComponent {}

// 
function log(target: any, propertyKey: string, descriptor: PropertyDescriptor) {
  const originalMethod = descriptor.value;
  
  descriptor.value = function (...args: any[]) {
    console.log(` ${propertyKey}:`, args);
    const result = originalMethod.apply(this, args);
    console.log(`${propertyKey} :`, result);
    return result;
  };
  
  return descriptor;
}

class Calculator {
  @log
  add(a: number, b: number) {
    return a + b;
  }
}

// 
function readonly(target: any, propertyKey: string) {
  Object.defineProperty(target, propertyKey, {
    writable: false
  });
}

class Person {
  @readonly
  name: string = 'John';
}

// 
function required(target: any, propertyKey: string, parameterIndex: number) {
  const existingRequiredParameters: number[] = 
    Reflect.getOwnMetadata('required', target, propertyKey) || [];
  
  existingRequiredParameters.push(parameterIndex);
  
  Reflect.defineMetadata(
    'required',
    existingRequiredParameters,
    target,
    propertyKey
  );
}

class UserService {
  createUser(@required name: string, age: number) {
    // 
  }
}
```

## 

### API

```typescript
// API
interface ApiResponse<T> {
  success: boolean;
  data: T;
  message?: string;
}

// API
interface ApiError {
  code: string;
  message: string;
  details?: any;
}

// API
class ApiClient {
  private baseURL: string;
  
  constructor(baseURL: string) {
    this.baseURL = baseURL;
  }
  
  async request<T>(
    endpoint: string,
    options?: RequestInit
  ): Promise<ApiResponse<T>> {
    const response = await fetch(`${this.baseURL}${endpoint}`, options);
    
    if (!response.ok) {
      const error: ApiError = await response.json();
      throw new Error(error.message);
    }
    
    return response.json();
  }
  
  async get<T>(endpoint: string): Promise<T> {
    const response = await this.request<T>(endpoint);
    return response.data;
  }
  
  async post<T, D = any>(endpoint: string, data: D): Promise<T> {
    const response = await this.request<T>(endpoint, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    return response.data;
  }
}

// 
interface User {
  id: number;
  name: string;
  email: string;
}

const api = new ApiClient('https://api.example.com');

// API
const user = await api.get<User>('/users/1');
console.log(user.name); //  

const newUser = await api.post<User, Omit<User, 'id'>>('/users', {
  name: 'John',
  email: 'john@example.com'
});
```

### 

```typescript
// Redux
interface State {
  user: User | null;
  posts: Post[];
  loading: boolean;
}

// Action
type Action =
  | { type: 'SET_USER'; payload: User }
  | { type: 'SET_POSTS'; payload: Post[] }
  | { type: 'SET_LOADING'; payload: boolean };

// Reducer
function reducer(state: State, action: Action): State {
  switch (action.type) {
    case 'SET_USER':
      return { ...state, user: action.payload };
    case 'SET_POSTS':
      return { ...state, posts: action.payload };
    case 'SET_LOADING':
      return { ...state, loading: action.payload };
    default:
      return state;
  }
}

// Action
const actions = {
  setUser: (user: User): Action => ({
    type: 'SET_USER',
    payload: user
  }),
  
  setPosts: (posts: Post[]): Action => ({
    type: 'SET_POSTS',
    payload: posts
  }),
  
  setLoading: (loading: boolean): Action => ({
    type: 'SET_LOADING',
    payload: loading
  })
};

// useReducer
import { useReducer } from 'react';

function useAppState() {
  const [state, dispatch] = useReducer(reducer, {
    user: null,
    posts: [],
    loading: false
  });
  
  return {
    state,
    actions: {
      setUser: (user: User) => dispatch(actions.setUser(user)),
      setPosts: (posts: Post[]) => dispatch(actions.setPosts(posts)),
      setLoading: (loading: boolean) => dispatch(actions.setLoading(loading))
    }
  };
}
```

### 

```typescript
// 
interface FormValues {
  username: string;
  email: string;
  age: number;
  agree: boolean;
}

// 
type FormErrors<T> = {
  [K in keyof T]?: string;
};

// Hook
function useForm<T extends Record<string, any>>(
  initialValues: T,
  validate: (values: T) => FormErrors<T>
) {
  const [values, setValues] = useState<T>(initialValues);
  const [errors, setErrors] = useState<FormErrors<T>>({});
  const [touched, setTouched] = useState<Partial<Record<keyof T, boolean>>>({});
  
  const handleChange = (name: keyof T) => (
    e: React.ChangeEvent<HTMLInputElement>
  ) => {
    const value = e.target.type === 'checkbox' 
      ? e.target.checked 
      : e.target.value;
    
    setValues(prev => ({ ...prev, [name]: value }));
  };
  
  const handleBlur = (name: keyof T) => () => {
    setTouched(prev => ({ ...prev, [name]: true }));
    const validationErrors = validate(values);
    setErrors(validationErrors);
  };
  
  const handleSubmit = (onSubmit: (values: T) => void) => (
    e: React.FormEvent
  ) => {
    e.preventDefault();
    const validationErrors = validate(values);
    
    if (Object.keys(validationErrors).length === 0) {
      onSubmit(values);
    } else {
      setErrors(validationErrors);
    }
  };
  
  return {
    values,
    errors,
    touched,
    handleChange,
    handleBlur,
    handleSubmit
  };
}

// 
function LoginForm() {
  const { values, errors, touched, handleChange, handleBlur, handleSubmit } = 
    useForm<FormValues>(
      {
        username: '',
        email: '',
        age: 0,
        agree: false
      },
      (values) => {
        const errors: FormErrors<FormValues> = {};
        
        if (!values.username) {
          errors.username = '';
        }
        
        if (!values.email) {
          errors.email = '';
        } else if (!/\S+@\S+\.\S+/.test(values.email)) {
          errors.email = '';
        }
        
        if (values.age < 18) {
          errors.age = '18';
        }
        
        return errors;
      }
    );
  
  return (
    <form onSubmit={handleSubmit(console.log)}>
      <input
        name="username"
        value={values.username}
        onChange={handleChange('username')}
        onBlur={handleBlur('username')}
      />
      {touched.username && errors.username && (
        <span>{errors.username}</span>
      )}
      
      {/*  */}
    </form>
  );
}
```

## 

### 

```typescript
//  
const numbers: number[] = [1, 2, 3];
const user: User = { id: 1, name: 'John' };

//  
const numbers = [1, 2, 3];  // number[]
const user = { id: 1, name: 'John' };  // { id: number; name: string; }

//  any
function process(data: any) {
  return data.value;
}

//  
function process<T extends { value: any }>(data: T) {
  return data.value;
}

//  
interface UserResponse {
  id: number;
  name: string;
  email: string;
}

interface UserRequest {
  name: string;
  email: string;
}

//  
interface User {
  id: number;
  name: string;
  email: string;
}

type UserResponse = User;
type UserRequest = Omit<User, 'id'>;
```

## 

TypeScript
-  ****
-  ****
-  ****
-  ****API
-  ****any
-  ****

**TypeScriptJavaScript**

