
# 

## 

Reactclass

``` jsx live 
class Welcome extends React.Component {
  render() {
    return <div>Hello world</div>;
  }
}
```

``` jsx live
function Hello(props) {
    return (
        <div>
            hello world {props.name}
        </div>
    )
}
```

`state``props`

`React.PureComponent``React.memo`

``` jsx
class Akara extends React.PureComponent { // 
    // ...
}

const App = React.memo(() => <div>akara</div>) // 
```


### 

`this.setState`

``` js
this.setState({name: 'aka'})
```

``` jsx
this.state = Object.assign(this.state, { name: 'aka' }) // 
```

****

``` tsx
this.setState({
    count: 1 // 0
})
console.log(this.state.count) // 01
```

`setState`

``` javascript
this.setState({
    count: 1
}, () => {
    console.log(this.state.count) // 1
})
```

`setState`State`setState`

``` jsx
this.setState((state, props) => {
    return {
        count: state.count + 1
    }
})
```

********`setState`********`setState`

React`isBatchingUpdates`********`true``setState`********`false``setState`



### 

React`event`****

``` jsx
<button onClick={this.handleClick}>
	aka
</button>
```



``` tsx
// 
constructor() {
    this.handlerClick = this.handlerClick.bind(this)
}

// 
<button onClick={(e) => this.handleClick(e)}>
    Click me
</button>

// 
class Btn extends React.component {
    handlerClick = (e) => {
        console.log(this)
    }

    render() {
        return (
        	 <button onClick={this.handlerClick}>
                Click me
             </button>
        )
    }
}
```

### 

[](http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/)



## Form

React********`input``defaultValue``input``value``onChange``input`

``` jsx
// 
handleChange = (e) => {
    this.setState({
        name: e.target.value.toUpperCase()
    })
}

render() {
    return <input type="text" value={name} onChange={this.handleChange}/>
}
```



## Ref and forwardRef

DOMDOM`ref`

``` javascript
class App extends React.Component {
    constructor(props) {
        super(props)
        this.myRef = React.createRef()
    }

    handleClick = () => {
        this.myRef.current.focus()
    }

    render() {
        return (
            <div>
                <input type="text" ref={this.myRef} />
                <button onClick={this.handleClick}></button>
            </div>
        )
    }
}
```

`FancyButton``ref`**Refs**

``` jsx
const FancyButton = React.forwardRef((props, ref) => {
    return <button ref={ref}>aka</button>
})

<FancyButton ref={myRef}></FancyButton>
```



## Context

Context “”

### 

``` jsx 
const ThemeContext = React.createContext("akara");
export const MyProvider = ThemeContext.Provider;

const App = () => {
    return (
        <div>
            <Test />
        </div>
    );
};

class Test extends React.Component {
    static contextType = ThemeContext
    render() {
        return <div>{this.context}</div>
    }
}

```

### 

``` js
const ThemeContext = React.createContext("akara");
export const MyProvider = ThemeContext.Provider;

export function useMyContext() {
    const context = useContext(ThemeContext);
    return context;
}

const App = () => {
    return (
        <div>
            <MyProvider value="bkara">
                <Test />
            </MyProvider>
        </div>
    );
};

const Test = () => {
    const context = useMyContext();
    return <div>{context}</div>;
};
```

## Fragment

``` jsx
function App() {
    return (
    	<>
            <React.Fragment>
        		<div></div>
            	<div></div>
        	</React.Fragment>
        </>
    )
}
```



## Hight-Order Components



``` js
// 
function App () {
    const MouseWithCat = withMouse(Cat)
    return (
        <MouseWithCat />
    )
}

function Cat (props) {
    let {x, y} = props.mouse
    x += 20
    y += 20
    return (
        <img src='https://messiahhh.github.io/blog/logo.png' style={{position: 'absolute', left: x , top: y, width: '40px', height: '40px'}}/>
    )
}

function withMouse(WrappedComponent) {
    return function () {
        let [point, setPoint] = useState({
            x: 0,
            y: 0,
        })

        const move = (e) => {
            setPoint({
                x: e.clientX,
                y: e.clientY
            })
        }

        return (
            <div style={{height: '100vh'}} onMouseMove={move}>
                { point.x } , { point.y }
                <WrappedComponent mouse={point} />
            </div>
        )
    }
}
```

## Render Props

``` js
// 
function App () {
    return (
        <Mouse render={point =>
            <Cat mouse={point} />
        }/>
    )
}

function Cat (props) {
    let {x, y} = props.mouse
    x += 20
    y += 20
    return (
        <img src='https://messiahhh.github.io/blog/logo.png' style={{position: 'absolute', left: x , top: y, width: '40px', height: '40px'}}/>
    )
}


function Mouse(props) {
    let [point, setPoint] = useState({
        x: 0,
        y: 0,
    })

    const move = (e) => {
        setPoint({
            x: e.clientX,
            y: e.clientY
        })
    }

    return (
        <div style={{height: '100vh'}} onMouseMove={move}>
            { point.x } , { point.y }
            {props.render(point)}
        </div>
    )
}
```

## Error Boundary

****`Error Boundary`

`static getDerivedStateFromError() ``componentDidCatch()``static getDerivedStateFromError() `UI`componentDidCatch()`

``` js
class ErrorBoundary extends React.Component {
    constructor(props) {
        super(props)
        this.state = { 
            hasError: false 
        }
    }

    static getDerivedStateFromError(error) {
        return {
            hasError: true
        }
    }

    componentDidCatch(error, errorInfo) {
        console.log(error, errorInfo);
    }

    render() {
        if (this.state.hasError) {
            return <div>i'm fallback UI</div>
        }
        return this.props.children
    }
}

const App = () => {
    const [count, setCount] = useState(0)
    const handleClick = useCallback(() => {
        setCount(count + 1)
    }, [count])

    if (count >= 5) {
        throw new Error('i crashed!')
    }
    return (
        <>
            {count}
            <div onClick={handleClick}></div>
        </>
    );
};

ReactDOM.render(
    <ErrorBoundary>
        <App />
    </ErrorBoundary>,
    document.querySelector("#root")
);
```

## Portals

``` js
const App = () => {
    return (
        <>
            <div>hello akara</div>
            <Modal>
                <div>i'm modal</div>
            </Modal>
        </>
    );
};

const Modal = (props) => {
    return ReactDOM.createPortal(
        props.children,
        document.querySelector('body')
    )
}
```