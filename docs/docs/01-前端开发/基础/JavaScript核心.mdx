---
sidebar_position: 2
title: JavaScript(ES6+)
tags: [JavaScript, ES6, ES2015+, ]
---

# JavaScript(ES6+)

ES6ECMAScript 2015JavaScript

## letconst

### 

```javascript
// var
function varTest() {
  var x = 1;
  if (true) {
    var x = 2;  // 
    console.log(x);  // 2
  }
  console.log(x);  // 2
}

// let
function letTest() {
  let x = 1;
  if (true) {
    let x = 2;  // 
    console.log(x);  // 2
  }
  console.log(x);  // 1
}
```

### 

```javascript
//  
console.log(x);  // ReferenceError
let x = 5;

//  
let y = 5;
console.log(y);  // 5
```

### const

```javascript
// const
const PI = 3.14159;
PI = 3.14;  // TypeError

// const
const obj = { name: 'John' };
obj.name = 'Jane';  //  
obj = {};  //  

// 
const frozen = Object.freeze({ name: 'John' });
frozen.name = 'Jane';  // 
```

## 

### 

```javascript
// 
const [a, b, c] = [1, 2, 3];
console.log(a, b, c);  // 1 2 3

// 
const [first, , third] = [1, 2, 3];
console.log(first, third);  // 1 3

// 
const [head, ...tail] = [1, 2, 3, 4];
console.log(head);  // 1
console.log(tail);  // [2, 3, 4]

// 
const [x = 1, y = 2] = [10];
console.log(x, y);  // 10 2

// 
let a = 1, b = 2;
[a, b] = [b, a];
console.log(a, b);  // 2 1
```

### 

```javascript
// 
const { name, age } = { name: 'John', age: 30 };
console.log(name, age);  // John 30

// 
const { name: userName, age: userAge } = { name: 'John', age: 30 };
console.log(userName, userAge);  // John 30

// 
const { x = 10, y = 20 } = { x: 5 };
console.log(x, y);  // 5 20

// 
const user = {
  name: 'John',
  address: {
    city: 'New York',
    country: 'USA'
  }
};
const { name, address: { city } } = user;
console.log(name, city);  // John New York

// 
const { a, b, ...rest } = { a: 1, b: 2, c: 3, d: 4 };
console.log(rest);  // { c: 3, d: 4 }
```

### 

```javascript
// 
function greet({ name, age = 18 }) {
  console.log(`Hello ${name}, you are ${age} years old`);
}
greet({ name: 'John', age: 30 });  // Hello John, you are 30 years old
greet({ name: 'Jane' });  // Hello Jane, you are 18 years old

// 
function sum([a, b]) {
  return a + b;
}
console.log(sum([1, 2]));  // 3
```

## 

### 

```javascript
// 
const add1 = function(a, b) {
  return a + b;
};

// 
const add2 = (a, b) => a + b;

// 
const double = x => x * 2;

// 
const greet = () => 'Hello';

// 
const makeObj = (name, age) => ({ name, age });
```

### this

```javascript
// this
function Timer1() {
  this.seconds = 0;
  setInterval(function() {
    this.seconds++;  // thiswindow
  }, 1000);
}

// this
function Timer2() {
  this.seconds = 0;
  setInterval(() => {
    this.seconds++;  // thisTimer2
  }, 1000);
}

// 
class Button {
  constructor() {
    this.count = 0;
  }
  
  //  bind
  handleClick1() {
    this.count++;
  }
  
  //  
  handleClick2 = () => {
    this.count++;
  }
}
```

## 

### 

```javascript
// 
const multiline = `
  This is a
  multiline
  string
`;

// 
const name = 'John';
const age = 30;
const message = `Hello, my name is ${name} and I'm ${age} years old`;

// 
const a = 10, b = 20;
console.log(`${a} + ${b} = ${a + b}`);  // 10 + 20 = 30

// 
const upper = str => str.toUpperCase();
console.log(`Hello ${upper('world')}`);  // Hello WORLD
```

### 

```javascript
// 
function highlight(strings, ...values) {
  return strings.reduce((result, str, i) => {
    return result + str + (values[i] ? `<mark>${values[i]}</mark>` : '');
  }, '');
}

const name = 'John';
const age = 30;
const html = highlight`My name is ${name} and I'm ${age} years old`;
// My name is <mark>John</mark> and I'm <mark>30</mark> years old

// SQL
function sql(strings, ...values) {
  return {
    text: strings.join('?'),
    values: values
  };
}

const userId = 123;
const query = sql`SELECT * FROM users WHERE id = ${userId}`;
// { text: 'SELECT * FROM users WHERE id = ?', values: [123] }
```

## 

### 

```javascript
// 
const arr1 = [1, 2, 3];
const arr2 = [4, 5, 6];
const merged = [...arr1, ...arr2];  // [1, 2, 3, 4, 5, 6]

// 
const original = [1, 2, 3];
const copy = [...original];

// 
const str = 'hello';
const chars = [...str];  // ['h', 'e', 'l', 'l', 'o']

// 
const numbers = [1, 2, 3, 4, 5];
console.log(Math.max(...numbers));  // 5

// 
const arr = [1, 2, 2, 3, 3, 4];
const unique = [...new Set(arr)];  // [1, 2, 3, 4]
```

### 

```javascript
// 
const obj1 = { a: 1, b: 2 };
const obj2 = { c: 3, d: 4 };
const merged = { ...obj1, ...obj2 };  // { a: 1, b: 2, c: 3, d: 4 }

// 
const original = { name: 'John', age: 30 };
const copy = { ...original };

// 
const user = { name: 'John', age: 30 };
const updated = { ...user, age: 31 };  // { name: 'John', age: 31 }

// 
const includeAge = true;
const user = {
  name: 'John',
  ...(includeAge && { age: 30 })
};
```

## Promise

### Promise

```javascript
// Promise
const promise = new Promise((resolve, reject) => {
  setTimeout(() => {
    const success = true;
    if (success) {
      resolve('Success!');
    } else {
      reject('Error!');
    }
  }, 1000);
});

// Promise
promise
  .then(result => console.log(result))
  .catch(error => console.error(error))
  .finally(() => console.log('Done'));

// Promise
fetch('/api/user')
  .then(response => response.json())
  .then(user => fetch(`/api/posts/${user.id}`))
  .then(response => response.json())
  .then(posts => console.log(posts))
  .catch(error => console.error(error));
```

### Promise

```javascript
// Promise.allPromise
const p1 = Promise.resolve(1);
const p2 = Promise.resolve(2);
const p3 = Promise.resolve(3);

Promise.all([p1, p2, p3])
  .then(results => console.log(results));  // [1, 2, 3]

// Promise.racePromise
Promise.race([p1, p2, p3])
  .then(result => console.log(result));  // 1

// Promise.allSettledPromise
Promise.allSettled([p1, p2, Promise.reject('error')])
  .then(results => console.log(results));
// [
//   { status: 'fulfilled', value: 1 },
//   { status: 'fulfilled', value: 2 },
//   { status: 'rejected', reason: 'error' }
// ]

// Promise.anyPromise
Promise.any([Promise.reject('error'), p2, p3])
  .then(result => console.log(result));  // 2
```

### async/await

```javascript
// 
async function fetchUser() {
  try {
    const response = await fetch('/api/user');
    const user = await response.json();
    return user;
  } catch (error) {
    console.error('Error:', error);
    throw error;
  }
}

// 
async function fetchMultiple() {
  //  
  const user = await fetchUser();
  const posts = await fetchPosts();
  
  //  
  const [user, posts] = await Promise.all([
    fetchUser(),
    fetchPosts()
  ]);
}

// 
async function handleErrors() {
  try {
    const result = await riskyOperation();
    return result;
  } catch (error) {
    if (error instanceof NetworkError) {
      // 
    } else if (error instanceof ValidationError) {
      // 
    } else {
      throw error;  // 
    }
  }
}

// await
async function processItems(items) {
  // 
  for (const item of items) {
    await processItem(item);
  }
  
  // 
  await Promise.all(items.map(item => processItem(item)));
}
```

## 

### 

```javascript
// 
class Person {
  // 
  constructor(name, age) {
    this.name = name;
    this.age = age;
  }
  
  // 
  greet() {
    console.log(`Hello, I'm ${this.name}`);
  }
  
  // 
  static create(name, age) {
    return new Person(name, age);
  }
  
  // Getter
  get info() {
    return `${this.name} (${this.age})`;
  }
  
  // Setter
  set info(value) {
    const [name, age] = value.split(',');
    this.name = name;
    this.age = parseInt(age);
  }
}

// 
const person = new Person('John', 30);
person.greet();  // Hello, I'm John
console.log(person.info);  // John (30)
```

### 

```javascript
// 
class Animal {
  constructor(name) {
    this.name = name;
  }
  
  speak() {
    console.log(`${this.name} makes a sound`);
  }
}

// 
class Dog extends Animal {
  constructor(name, breed) {
    super(name);  // 
    this.breed = breed;
  }
  
  // 
  speak() {
    console.log(`${this.name} barks`);
  }
  
  // 
  parentSpeak() {
    super.speak();
  }
}

const dog = new Dog('Max', 'Labrador');
dog.speak();  // Max barks
dog.parentSpeak();  // Max makes a sound
```

### 

```javascript
class BankAccount {
  // 
  #balance = 0;
  
  constructor(initialBalance) {
    this.#balance = initialBalance;
  }
  
  // 
  deposit(amount) {
    if (amount > 0) {
      this.#balance += amount;
    }
  }
  
  getBalance() {
    return this.#balance;
  }
  
  // 
  #validateAmount(amount) {
    return amount > 0 && amount <= this.#balance;
  }
  
  withdraw(amount) {
    if (this.#validateAmount(amount)) {
      this.#balance -= amount;
      return true;
    }
    return false;
  }
}

const account = new BankAccount(1000);
account.deposit(500);
console.log(account.getBalance());  // 1500
// console.log(account.#balance);  //  SyntaxError
```

## 

### ES6

```javascript
// math.js - 
export const PI = 3.14159;

export function add(a, b) {
  return a + b;
}

export class Calculator {
  multiply(a, b) {
    return a * b;
  }
}

// 
export default function subtract(a, b) {
  return a - b;
}

// main.js - 
import subtract, { PI, add, Calculator } from './math.js';

// 
import { add as sum } from './math.js';

// 
import * as math from './math.js';
console.log(math.PI);
console.log(math.add(1, 2));

// 
async function loadModule() {
  const module = await import('./math.js');
  console.log(module.PI);
}
```

## 

### Map

```javascript
// Map
const map = new Map();

// 
map.set('name', 'John');
map.set('age', 30);
map.set(123, 'number key');
map.set({ id: 1 }, 'object key');

// 
console.log(map.get('name'));  // John

// 
console.log(map.has('name'));  // true

// 
map.delete('age');

// 
console.log(map.size);  // 3

// 
map.forEach((value, key) => {
  console.log(`${key}: ${value}`);
});

// 
const entries = [...map];  // [['name', 'John'], ...]
const keys = [...map.keys()];
const values = [...map.values()];

// 
const map2 = new Map([
  ['a', 1],
  ['b', 2]
]);
```

### Set

```javascript
// Set
const set = new Set([1, 2, 3, 3, 4]);  // Set {1, 2, 3, 4}

// 
set.add(5);
set.add(5);  // 

// 
console.log(set.has(3));  // true

// 
set.delete(2);

// 
console.log(set.size);  // 4

// 
set.forEach(value => console.log(value));

// 
const arr = [...set];

// 
const numbers = [1, 2, 2, 3, 3, 4];
const unique = [...new Set(numbers)];  // [1, 2, 3, 4]

// 
const setA = new Set([1, 2, 3]);
const setB = new Set([2, 3, 4]);

// 
const union = new Set([...setA, ...setB]);  // {1, 2, 3, 4}

// 
const intersection = new Set([...setA].filter(x => setB.has(x)));  // {2, 3}

// 
const difference = new Set([...setA].filter(x => !setB.has(x)));  // {1}
```

### WeakMapWeakSet

```javascript
// WeakMap
const weakMap = new WeakMap();
let obj = { id: 1 };

weakMap.set(obj, 'some value');
console.log(weakMap.get(obj));  // some value

obj = null;  // 

// WeakSet
const weakSet = new WeakSet();
let obj2 = { id: 2 };

weakSet.add(obj2);
console.log(weakSet.has(obj2));  // true

obj2 = null;  // 
```

## 

### 

```javascript
// 
const range = {
  from: 1,
  to: 5,
  
  [Symbol.iterator]() {
    return {
      current: this.from,
      last: this.to,
      
      next() {
        if (this.current <= this.last) {
          return { done: false, value: this.current++ };
        } else {
          return { done: true };
        }
      }
    };
  }
};

for (let num of range) {
  console.log(num);  // 1, 2, 3, 4, 5
}
```

### 

```javascript
// 
function* numberGenerator() {
  yield 1;
  yield 2;
  yield 3;
}

const gen = numberGenerator();
console.log(gen.next());  // { value: 1, done: false }
console.log(gen.next());  // { value: 2, done: false }
console.log(gen.next());  // { value: 3, done: false }
console.log(gen.next());  // { value: undefined, done: true }

// 
function* fibonacci() {
  let [a, b] = [0, 1];
  while (true) {
    yield a;
    [a, b] = [b, a + b];
  }
}

const fib = fibonacci();
console.log(fib.next().value);  // 0
console.log(fib.next().value);  // 1
console.log(fib.next().value);  // 1
console.log(fib.next().value);  // 2

// 
function* gen1() {
  yield 1;
  yield 2;
}

function* gen2() {
  yield* gen1();  // gen1
  yield 3;
}

console.log([...gen2()]);  // [1, 2, 3]

// 
async function* asyncGenerator() {
  for (let i = 0; i < 3; i++) {
    await new Promise(resolve => setTimeout(resolve, 1000));
    yield i;
  }
}

(async () => {
  for await (const num of asyncGenerator()) {
    console.log(num);  // 0, 1, 2 ()
  }
})();
```

## 

### Proxy

```javascript
// 
const target = { name: 'John', age: 30 };

const handler = {
  get(target, prop) {
    console.log(`Getting ${prop}`);
    return target[prop];
  },
  
  set(target, prop, value) {
    console.log(`Setting ${prop} to ${value}`);
    target[prop] = value;
    return true;
  }
};

const proxy = new Proxy(target, handler);
console.log(proxy.name);  // Getting name, John
proxy.age = 31;  // Setting age to 31

// 
const validator = {
  set(target, prop, value) {
    if (prop === 'age') {
      if (typeof value !== 'number' || value < 0) {
        throw new TypeError('Age must be a positive number');
      }
    }
    target[prop] = value;
    return true;
  }
};

const person = new Proxy({}, validator);
person.age = 30;  // 
// person.age = -1;  //  TypeError

// 
const withDefaults = new Proxy({}, {
  get(target, prop) {
    return prop in target ? target[prop] : 'default';
  }
});

console.log(withDefaults.name);  // default
withDefaults.name = 'John';
console.log(withDefaults.name);  // John
```

### Reflect

```javascript
// ReflectProxy handler
const obj = { name: 'John' };

// 
Reflect.get(obj, 'name');  // John

// 
Reflect.set(obj, 'age', 30);

// 
Reflect.has(obj, 'name');  // true

// 
Reflect.deleteProperty(obj, 'age');

// 
Reflect.getPrototypeOf(obj);

// 
Reflect.setPrototypeOf(obj, Array.prototype);
```

## Symbol

```javascript
// Symbol
const sym1 = Symbol();
const sym2 = Symbol('description');
const sym3 = Symbol('description');

console.log(sym2 === sym3);  // falseSymbol

// 
const id = Symbol('id');
const user = {
  name: 'John',
  [id]: 123
};

console.log(user[id]);  // 123
console.log(Object.keys(user));  // ['name']Symbol

// Symbol
const globalSym1 = Symbol.for('app.id');
const globalSym2 = Symbol.for('app.id');
console.log(globalSym1 === globalSym2);  // true

// Symbol
class MyArray {
  [Symbol.iterator]() {
    // 
  }
  
  [Symbol.toStringTag] = 'MyArray';
}

console.log(new MyArray().toString());  // [object MyArray]
```

## 

### 1. constlet

```javascript
//  
const MAX_SIZE = 100;
let count = 0;

//  
var MAX_SIZE = 100;
var count = 0;
```

### 2. 

```javascript
//  
const numbers = [1, 2, 3];
const doubled = numbers.map(n => n * 2);

//  
const doubled = numbers.map(function(n) {
  return n * 2;
});
```

### 3. 

```javascript
//  
const message = `Hello ${name}, you are ${age} years old`;

//  
const message = 'Hello ' + name + ', you are ' + age + ' years old';
```

### 4. 

```javascript
//  
const { name, age } = user;
const [first, second] = array;

//  
const name = user.name;
const age = user.age;
const first = array[0];
const second = array[1];
```

### 5. async/await

```javascript
//  
async function fetchData() {
  try {
    const response = await fetch(url);
    const data = await response.json();
    return data;
  } catch (error) {
    console.error(error);
  }
}

//  
function fetchData() {
  return fetch(url)
    .then(response => response.json())
    .then(data => data)
    .catch(error => console.error(error));
}
```

## 

ES6+JavaScript
-  let/const
-  Promiseasync/await
-  ES6
-  MapSetSymbol
-  

JavaScript

