---
sidebar_position: 1
title: JavaScript
tags: [, JavaScript, ]
---

# JavaScript

## ðŸŸ¢ 

### 1. JavaScript

****

JavaScript8

**7**
- `Number`
- `String`
- `Boolean`
- `Undefined`
- `Null`
- `Symbol`ES6
- `BigInt`ES2020

**1**
- `Object`ArrayFunctionDate

****
```javascript
// typeof
typeof 123 // 'number'
typeof 'hello' // 'string'
typeof true // 'boolean'
typeof undefined // 'undefined'
typeof null // 'object' (bug)
typeof Symbol() // 'symbol'
typeof 123n // 'bigint'
typeof {} // 'object'
typeof [] // 'object'
typeof function(){} // 'function'

// instanceof
[] instanceof Array // true
{} instanceof Object // true

// Object.prototype.toString
Object.prototype.toString.call([]) // '[object Array]'
Object.prototype.toString.call({}) // '[object Object]'
```

---

### 2. ==  === 

****

- `==`
- `===`

```javascript
// == 
1 == '1' // true
0 == false // true
null == undefined // true

// === 
1 === '1' // false
0 === false // false
null === undefined // false

// 
NaN == NaN // false
NaN === NaN // false
Object.is(NaN, NaN) // true
```

**** `===`  `!==`

---

### 3. varletconst

****

|  | var | let | const |
|------|-----|-----|-------|
|  |  |  |  |
|  |  |  |  |
|  |  |  |  |
|  |  |  |  |

```javascript
// var - 
function test() {
  var x = 1;
  if (true) {
    var x = 2; // 
    console.log(x); // 2
  }
  console.log(x); // 2
}

// let - 
function test() {
  let x = 1;
  if (true) {
    let x = 2; // 
    console.log(x); // 2
  }
  console.log(x); // 1
}

// const - 
const obj = { a: 1 };
obj.a = 2; // 
obj = {}; // 
```

---

## ðŸŸ¡ 

### 4. 

****



****
- 
- 
- 

```javascript
// 
function outer() {
  let count = 0;
  
  return function inner() {
    count++;
    console.log(count);
  };
}

const counter = outer();
counter(); // 1
counter(); // 2
counter(); // 3

// 1
function createPerson(name) {
  let age = 0; // 
  
  return {
    getName() {
      return name;
    },
    getAge() {
      return age;
    },
    setAge(newAge) {
      if (newAge >= 0 && newAge <= 150) {
        age = newAge;
      }
    }
  };
}

const person = createPerson('John');
person.setAge(30);
console.log(person.getAge()); // 30
console.log(person.age); // undefined

// 2
function curry(fn) {
  return function curried(...args) {
    if (args.length >= fn.length) {
      return fn.apply(this, args);
    } else {
      return function(...nextArgs) {
        return curried.apply(this, args.concat(nextArgs));
      };
    }
  };
}

function add(a, b, c) {
  return a + b + c;
}

const curriedAdd = curry(add);
console.log(curriedAdd(1)(2)(3)); // 6
console.log(curriedAdd(1, 2)(3)); // 6

// 3
function debounce(fn, delay) {
  let timer = null;
  
  return function(...args) {
    clearTimeout(timer);
    timer = setTimeout(() => {
      fn.apply(this, args);
    }, delay);
  };
}

function throttle(fn, delay) {
  let lastTime = 0;
  
  return function(...args) {
    const now = Date.now();
    if (now - lastTime >= delay) {
      fn.apply(this, args);
      lastTime = now;
    }
  };
}
```

****
- 
- 
- 

---

### 5. 

****

****
-  `__proto__`  `prototype`
-  `prototype` 

****
-  `__proto__` 
- 
-  `Object.prototype`

```javascript
// 
function Person(name) {
  this.name = name;
}

Person.prototype.sayHello = function() {
  console.log(`Hello, I'm ${this.name}`);
};

const person = new Person('John');

// 
console.log(person.__proto__ === Person.prototype); // true
console.log(Person.prototype.__proto__ === Object.prototype); // true
console.log(Object.prototype.__proto__ === null); // true

// 
person.sayHello(); //  Person.prototype 
person.toString(); //  Object.prototype 

//  new
function myNew(Constructor, ...args) {
  // 1. prototype
  const obj = Object.create(Constructor.prototype);
  
  // 2. 
  const result = Constructor.apply(obj, args);
  
  // 3. 
  return result instanceof Object ? result : obj;
}

const person2 = myNew(Person, 'Jane');
person2.sayHello(); // Hello, I'm Jane

// 
function Student(name, grade) {
  Person.call(this, name);
  this.grade = grade;
}

Student.prototype = Object.create(Person.prototype);
Student.prototype.constructor = Student;

Student.prototype.study = function() {
  console.log(`${this.name} is studying`);
};

const student = new Student('Tom', 10);
student.sayHello(); // Hello, I'm Tom
student.study(); // Tom is studying
```

---

### 6. this

****

this

**1. **
```javascript
function foo() {
  console.log(this); // window () / undefined ()
}
foo();
```

**2. **
```javascript
const obj = {
  name: 'John',
  sayName() {
    console.log(this.name);
  }
};
obj.sayName(); // John

// 
const fn = obj.sayName;
fn(); // undefined
```

**3. **
```javascript
function greet(greeting) {
  console.log(`${greeting}, ${this.name}`);
}

const person = { name: 'John' };

greet.call(person, 'Hello'); // Hello, John
greet.apply(person, ['Hi']); // Hi, John

const boundGreet = greet.bind(person, 'Hey');
boundGreet(); // Hey, John
```

**4. new**
```javascript
function Person(name) {
  this.name = name;
}

const person = new Person('John');
console.log(person.name); // John
```

**5. **
```javascript
const obj = {
  name: 'John',
  regularFunc() {
    console.log(this.name); // John
  },
  arrowFunc: () => {
    console.log(this.name); // undefined ()
  },
  nested() {
    const arrow = () => {
      console.log(this.name); // John (nestedthis)
    };
    arrow();
  }
};
```

****new >  >  > 

---

##  

### 7. 

****

```javascript
function deepClone(obj, hash = new WeakMap()) {
  // null  undefined
  if (obj === null || obj === undefined) {
    return obj;
  }
  
  // 
  if (typeof obj !== 'object') {
    return obj;
  }
  
  // Date
  if (obj instanceof Date) {
    return new Date(obj);
  }
  
  // RegExp
  if (obj instanceof RegExp) {
    return new RegExp(obj);
  }
  
  // 
  if (hash.has(obj)) {
    return hash.get(obj);
  }
  
  // 
  const cloneObj = Array.isArray(obj) ? [] : {};
  hash.set(obj, cloneObj);
  
  // 
  for (let key in obj) {
    if (obj.hasOwnProperty(key)) {
      cloneObj[key] = deepClone(obj[key], hash);
    }
  }
  
  // Symbol
  const symbolKeys = Object.getOwnPropertySymbols(obj);
  for (let key of symbolKeys) {
    cloneObj[key] = deepClone(obj[key], hash);
  }
  
  return cloneObj;
}

// 
const obj = {
  a: 1,
  b: { c: 2 },
  d: [1, 2, 3],
  e: new Date(),
  f: /test/g,
  [Symbol('key')]: 'symbol value'
};
obj.self = obj; // 

const cloned = deepClone(obj);
console.log(cloned);
console.log(cloned.self === cloned); // true
```

---

### 8. Promise.allPromise.race

****

```javascript
// Promise.all
Promise.myAll = function(promises) {
  return new Promise((resolve, reject) => {
    if (!Array.isArray(promises)) {
      return reject(new TypeError(''));
    }
    
    const results = [];
    let completedCount = 0;
    
    if (promises.length === 0) {
      return resolve(results);
    }
    
    promises.forEach((promise, index) => {
      Promise.resolve(promise).then(
        value => {
          results[index] = value;
          completedCount++;
          
          if (completedCount === promises.length) {
            resolve(results);
          }
        },
        reason => {
          reject(reason);
        }
      );
    });
  });
};

// Promise.race
Promise.myRace = function(promises) {
  return new Promise((resolve, reject) => {
    if (!Array.isArray(promises)) {
      return reject(new TypeError(''));
    }
    
    promises.forEach(promise => {
      Promise.resolve(promise).then(resolve, reject);
    });
  });
};

// 
const p1 = Promise.resolve(1);
const p2 = new Promise(resolve => setTimeout(() => resolve(2), 1000));
const p3 = Promise.resolve(3);

Promise.myAll([p1, p2, p3]).then(console.log); // [1, 2, 3]
Promise.myRace([p1, p2, p3]).then(console.log); // 1
```

---

### 9. EventEmitter

****

```javascript
class EventEmitter {
  constructor() {
    this.events = {};
  }
  
  // 
  on(event, listener) {
    if (!this.events[event]) {
      this.events[event] = [];
    }
    this.events[event].push(listener);
    
    // 
    return () => this.off(event, listener);
  }
  
  // 
  off(event, listener) {
    if (!this.events[event]) return;
    
    this.events[event] = this.events[event].filter(
      fn => fn !== listener
    );
  }
  
  // 
  emit(event, ...args) {
    if (!this.events[event]) return;
    
    this.events[event].forEach(listener => {
      listener(...args);
    });
  }
  
  // 
  once(event, listener) {
    const onceWrapper = (...args) => {
      listener(...args);
      this.off(event, onceWrapper);
    };
    this.on(event, onceWrapper);
  }
}

// 
const emitter = new EventEmitter();

const unsubscribe = emitter.on('data', (data) => {
  console.log(':', data);
});

emitter.emit('data', { id: 1 }); // : { id: 1 }
unsubscribe();
emitter.emit('data', { id: 2 }); // 

emitter.once('init', () => {
  console.log('');
});
emitter.emit('init'); // 
emitter.emit('init'); // 
```

---

##  

JavaScript
1. ****
2. ****var/let/const
3. ****new
4. **this**
5. ****Promiseasync/await
6. ****

****
- 
- API
- 
- 

