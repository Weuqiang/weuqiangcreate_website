---
sidebar_position: 5
title: Docker
---



Docker<Highlight>Docker</Highlight>

## 

[](https://www.docker.com/get-started/)`Docker Desktop`

:::info
[](https://docs.docker.com/engine/install/)`Docker`
:::

`docker`

## 

2

```bash showLineNumbers
# Docker Hub jiangmiemie/llmchat:0.0.2 
docker pull jiangmiemie/llmchat:0.0.2

#  llmchat 
docker load < llmchat.tar.gz
# 
# docker load -i llmchat.tar.gz
```


```bash showLineNumbers
# 
# 850180-d-p
docker run -d -p 80:8501 jiangmiemie/llmchat:0.0.2

# 
docker ps -a

# 
docker stop {container_id}

# 
docker rm {container_id}
```

:::tip

:::

## 

```bash showLineNumbers
# 
docker build -t llmchat:0.0.2 .

# 
docker tag llmchat:0.0.2 jiangmiemie/llmchat:0.0.2

# 
docker login

# 
docker push jiangmiemie/llmchat:0.0.2

# 
docker save nginx:latest > nginx_latest.tar
# docker save nginx:latest -o nginx_latest.tar

# 
docker save nginx:latest | gzip > nginx_latest.tar.gz
```

### Dockerfile

 `Dockerfile`build `docker build -t llmchat:0.0.2 .``.``Dockerfile`

[Dockerfile ](https://docs.docker.com/reference/dockerfile/)



```yaml showLineNumbers title="Dockerfile"
# 
FROM python:3.12.8

# 
WORKDIR /app

# 
COPY . .

# (RUN)shell 
RUN pip install -r requirements.txt

# exec  shell 
RUN ["pip", "install", "-r", "requirements.txt"]

# 
CMD ["python", "chat_routers.py"]
```

#### FROM

FROM 
 nginx  FROM  Dockerfile  FROM 

 [Docker Hub](https://hub.docker.com/explore/)   nginxredismongomysqlhttpdphptomcat   nodeopenjdkpythonrubygolang    ubuntudebiancentosfedoraalpine 

Docker  scratch

FROM scratch

 scratch 

 swarmcoreos/etcd Linux  FROM scratch  Go   Go 

#### WORKDIR


 WORKDIR 
 WORKDIR  RUN cd `<path>` && `<do something>` 
WORKDIR  Dockerfile  RUNCMDENTRYPOINTCOPYADD 
 WORKDIR  Dockerfile 

#### ADD & COPY

**ADD ** URL ( 600) ****  tar  gzip, bzip2  xz ADD  **** 

**COPY **build context

#### ENTRYPOINT & RUN & CMD

- **RUN ** RUN 

- **CMD ** `docker run` 

- **ENTRYPOINT ** CMD 

1. ****ENTRYPOINT  `docker run` 
2. ****`docker run`  ENTRYPOINT 
3. **** `--entrypoint` 

:::tip
**ENTRYPOINT + CMD **
- ENTRYPOINT 
- CMD 
-  CMD 

```dockerfile
ENTRYPOINT ["python", "app.py"]
CMD ["--port", "8080"]
```
:::


### run

`docker run`100<Highlight>`Dockerfile``CMD`</Highlight>

#### **`-d`** ( `--detach`)****

IDWeb

```bash
# docker run -d {}
docker run -d nginx
```


#### **`-p`** ( `--publish`)****



<Highlight></Highlight>

```bash
# docker run -p []:[] {}
#  8080  80 
docker run -d -p 8080:80 nginx
```


#### **`-it`******

`-i` `-t`  Shell 

```bash
# docker run -it {} {}
#  Ubuntu  bash 
docker run -it ubuntu bash
```

#### **`--name`******

ID `docker stop`, `docker start`

```bash
# docker run --name {} {}
docker run -d --name my-nginx-server nginx
```


#### **`-v`** ( `--volume`)****



```bash
# docker run -v []:[] {}
#  /app/data  /data 
docker run -d -v /app/data:/data postgres
```

#### **`-e`** ( `--env`)****

```bash
# docker run -e []=[] {}
docker run -d -e POSTGRES_PASSWORD=mysecretpassword postgres
```

### 

[Docker ](https://docs.docker.com/reference/)


 image( git  add )

```bash
docker cp {path} {id}{id_path}


docker cp C:/Users/SY/Desktop/docktest/index.html {id}://usr/share/nginx/html
```

( git  commit)

```bash
Docker commit -m 'fun' {id} 'name'


Docker commit() -m 'fun' 'name'(image)
```

 image

```bash
Docker rmi {id}
Docker rmi
```



```bash
docker ps -a
# id

docker exec -it  id/bin/bash
# id

pip install pandas
python -m unittest test.test_spider.MyTestCase.test_spider
# 
```

:
[https://www.runoob.com/docker/docker-tutorial.html](https://www.runoob.com/docker/docker-tutorial.html)


## docker-compose

docker-compose  Docker  YAML docker-compose 

### 

```bash showLineNumbers
 backend
    Dockerfile
    .env
    .dockerignore
    chat_routers.py
    requirements.txt
 frontend
    Dockerfile
    requirements.txt
    _streamlit
        streamlit_app.py
 docker-compose.yml
 README.md
```

### 

```yaml showLineNumbers
version: "3.8" #  Docker Compose 

services: # 
  python-app-frontend: #  Python 
    build: #  Dockerfile 
      context: ./frontend # 
      dockerfile: Dockerfile # Dockerfile 
    image: jiangmiemie/llmchatf:0.1.0
    ports:
      - "8501:8501" #  Streamlit 
    command: ["streamlit", "run", "_streamlit/streamlit_app.py"] # 
    depends_on:
      - python-app-backend

  python-app-backend: # 
    build: #  Dockerfile 
      context: ./backend # 
      dockerfile: Dockerfile #  Dockerfile 
    image: jiangmiemie/llmchatb:0.1.0
    ports:
      - "8010:8010" # 
    command: ["python", "chat_routers.py"] # 
    volumes:
      - ./backend/.env:/app/.env:ro #  .env ro
```

### 

1.  `docker-compose.yml` 

```bash showLineNumbers
# 
docker-compose up -d

# 
docker-compose logs -f
```

2. 

```bash
# 
docker-compose up
```

3. 

```bash
# 
docker-compose down

#  Dockerfile 
docker-compose up -d --build

# 
docker-compose ps

# 
docker-compose logs -f python-app-frontend
docker-compose logs -f python-app-backend
```



1.  Docker  Docker Compose 
2. 
3. `docker-compose logs -f`


4. 

```bash
# 
docker-compose down

# 
docker-compose down --rmi all
```

 Dockerfile 

```bash
docker-compose up -d --build
```

### 

```bash showLineNumbers
# 
docker-compose build

# 
docker-compose push
```

### 



```bash showLineNumbers
 backend
    .env
 docker-compose.yml
```

1.  docker-compose.yml:

```yaml:docker-compose.yml
version: '3.8'
services:
  python-app-frontend:
    image: jiangmiemie/llmchatf:0.1.0
    ports:
      - "8501:8501"

  python-app-backend:
    image: jiangmiemie/llmchatb:0.1.0
    ports:
      - "8010:8010"
    volumes:
      - ./backend/.env:/app/.env:ro
```

2. :

```bash
# 
docker-compose pull

# 
docker-compose up -d
```


## k8s

[Kubernetes](https://kubernetes.io/)  

Docker  Kubernetes 



