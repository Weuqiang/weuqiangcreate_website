---
sidebar_position: 2
title: 
---

 HTTP1.0  Js 

[HTTP2.0](https://http2-explained.haxx.se/) h2 VUE  Js  HTML  XHR(XMLHttpRequest)

 HTTP 

(1) GET URL 
(2) HEAD URL 
(3) POST URL 
(4) PUT URL  URL 
(5) PATCH URL 
(6) DELETE URL 
()options 

request  HTTP1.0   urllib3 

aiohttp  HTTP2.0 

httpx  HTTP1.1/2.0 

locust /

## requests

requests  urllib3  PythonHTTP 

[requests ](https://requests.readthedocs.io/en/latest/)

### requests 

```python showLineNumbers
import requests
r = requests.get('https://api.github.com/events')
r = requests.post('https://httpbin.org/post', data={'key': 'value'})
r = requests.put('https://httpbin.org/put', data={'key': 'value'})
r = requests.delete('https://httpbin.org/delete')
r = requests.head('https://httpbin.org/get')
r = requests.patch('http://httpbin.org/patch',data ={'key': 'value'})
r = requests.options('https://httpbin.org/get')
```

### requests 

Requests  raise_for_status()

(1) requests.ConnectionError DNS 
(2) requests.HTTPErrorHTTP 
(3) requests.URLRequiredURL 
(4) requests.TooManyRedirects
(5) requests.ConnectTimeout
(6) requests.Timeout URL 

```python showLineNumbers
import requests
try:
    r=requests.get("https://www.baidu.com/error",timeout=30) #url
    r.raise_for_status() #200HTTPError
except requests.HTTPError as e:
    print(e)# 404 Client Error: Not Found for url: https://www.baidu.com/error
```

## aiohttp

[aiohttp ](https://docs.aiohttp.org/en/stable/)

### aiohttp 

```python showLineNumbers
import aiohttp
import asyncio

async def main():
    async with aiohttp.ClientSession('http://httpbin.org') as session:
        async with session.post('/post', data=b'data'):
            pass
        async with session.put('/put', data=b'data'):
            pass
        async with session.get('/get') as resp:
            print(resp.status)
            print(await resp.text())

asyncio.run(main())
```

## httpx

HTTPX  Python 3  HTTP  API HTTP / 1.1  HTTP / 2httpx  web  IPEvent HooksSSL  VUE 

[httpx ](https://www.python-httpx.org/)

### httpxH2 

```python showLineNumbers
import httpx
import asyncio

'''
 HTTP 
 HTTP/2   HTTP/2  HTTP/2  HTTP/1.1  HTTP/1.1 

 HTTP  
'''
async def main():
        client = httpx.AsyncClient(http2=True)
        response = await client.get('https://www.python-httpx.org/')
        print(response.http_version)  # "HTTP/1.0", "HTTP/1.1", or "HTTP/2".
asyncio.run(main())
```

### httpx 

```python showLineNumbers
import httpx

## HTTP / 1.1 A
r = httpx.post('https://httpbin.org/post', data={'key': 'value'})
r = httpx.put('https://httpbin.org/put', data={'key': 'value'})
r = httpx.delete('https://httpbin.org/delete')
r = httpx.head('https://httpbin.org/get')
r = httpx.options('https://httpbin.org/get')
r = httpx.patch('https://httpbin.org/get')
r = httpx.get('https://www.example.org/')

r # <Response [200 OK]>
r.status_code # 200
r.headers['content-type'] # r.headers['content-type']
r.text #'<!doctype html>...</html>'

## HTTP / 1.1 B
client = httpx.Client()
r = client.post('https://httpbin.org/post', data={'key': 'value'})
r = client.put('https://httpbin.org/put', data={'key': 'value'})
r = client.delete('https://httpbin.org/delete')
r = client.head('https://httpbin.org/get')
r = client.options('https://httpbin.org/get')
r = client.patch('https://httpbin.org/get')
r = client.get('https://www.example.org/')
client.close()


## A
async def maina():
    async with httpx.AsyncClient() as client:
        r = await client.post('https://httpbin.org/post', data={'key': 'value'})
        r = await client.put('https://httpbin.org/put', data={'key': 'value'})
        r = await client.delete('https://httpbin.org/delete')
        r = await client.head('https://httpbin.org/get')
        r = await client.options('https://httpbin.org/get')
        r = await client.patch('https://httpbin.org/get')
        r = await client.get('https://www.example.com/')
    print(r)  #<Response [200 OK]>
asyncio.run(maina())

## B
async def mainb():
    client = httpx.AsyncClient()
    r = await client.post('https://httpbin.org/post', data={'key': 'value'})
    r = await client.put('https://httpbin.org/put', data={'key': 'value'})
    r = await client.delete('https://httpbin.org/delete')
    r = await client.head('https://httpbin.org/get')
    r = await client.options('https://httpbin.org/get')
    r = await client.patch('https://httpbin.org/get')
    r = await client.get('https://www.example.com/')
    await client.aclose()
    print(r)  #<Response [200 OK]>
asyncio.run(mainb())

## H2
client = httpx.Client(http2=True)
client = httpx.AsyncClient(http2=True)

## 
headers = {'X-Auth': 'from-client'}
params = {'client_id': 'client1'}
with httpx.Client(headers=headers, params=params,http2=True,proxies="http://localhost:8030") as client:
    headers = {'X-Custom': 'from-request'}
    params = {'request_id': 'request1'}
    r = client.get('https://example.com', headers=headers, params=params)

r.request.url # URL('https://example.com?client_id=client1&request_id=request1')
r.request.headers['X-Auth'] # 'from-client'
r.request.headers['X-Custom'] # 'from-request'

```

### httpx 

response.num_bytes_downloaded

```python showLineNumbers
import tempfile
import httpx
import rich.progress

with tempfile.NamedTemporaryFile() as download_file:
    url = "https://speed.hetzner.de/100MB.bin"
    with httpx.stream("GET", url) as response:
        total = int(response.headers["Content-Length"])

        with rich.progress.Progress(
            "[progress.percentage]{task.percentage:>3.0f}%",
            rich.progress.BarColumn(bar_width=None),
            rich.progress.DownloadColumn(),
            rich.progress.TransferSpeedColumn(),
        ) as progress:
            download_task = progress.add_task("Download", total=total)
            for chunk in response.iter_bytes():
                download_file.write(chunk)
                progress.update(download_task, completed=response.num_bytes_downloaded)
```

## locust

locust `locustfile.py` Python 

```python showLineNumbers
import time
from locust import HttpUser, task, between

#  locustfile User 
class QuickstartUser(HttpUser):
    #  1  5 
    wait_time = between(1, 5)

    #  @task  locust  UserLocust  greenlet“” Python  /hello  /world
    @task
    def hello_world(self):
        self.client.get("/hello")
        self.client.get("/world")

    #  @task  3 QuickstartUser  -  hello_world  view_items -  Locust  view_items  hello_world  1  5 
    @task(3)
    def view_items(self):
        for item_id in range(10):
            self.client.get(f"/item?id={item_id}", name="/item")
            time.sleep(1)
    #  @task 
    def on_start(self):
        self.client.post("/login", json={"username":"foo", "password":"bar"})
```

 `locust` 

`locust --headless --users 10 --spawn-rate 1 -H http://your-server.com`

[](https://docs.locust.io/)