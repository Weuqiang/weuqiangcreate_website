---
sidebar_position: 3
title: compression
---

`compression`

:::info

:::

|  |  |  |  |  |
|------|--------|------|------|----------|
| compression.zstd | zstd |  |  |  |
| compression.lzma | lzma |  |  |  |
| compression.bz2 | bzip2 |  |  |  |
| compression.gzip | gzip |  |  | Web |

 `Python 3.14`  `compression.zstd`

## compression.zstd

### 

 0 20 ""

```python showLineNumbers
from compression import zstd

# 
lower, upper = zstd.CompressionParameter.compression_level.bounds()
print(lower, upper)
# -131072 22
```
:::info
-131072  -2^17 

22 

1-19
:::

### 

`compression.zstd.open(file, /, mode='rb', *, level=None, options=None, zstd_dict=None, encoding=None, errors=None, newline=None)`


- `file`
- `mode`
- `level`
- `options`
- `zstd_dict`zstd
- `encoding`
- `errors`
- `newline`



- 

```python showLineNumbers
from compression import zstd

def compress_file(input_file, output_file, level=3):
    """
    
    :
        input_file: 
        output_file: 
        level: 
    """
    """"""
    with open(input_file, 'rb') as f_in:
        data = f_in.read()
    
    with zstd.open(output_file, 'wb', level) as f_out:
        f_out.write(data)


def decompress_file(input_file, output_file):
    """"""
    with zstd.open(input_file, 'rb') as f_in:
        data = f_in.read()
    
    with open(output_file, 'wb') as f_out:
        f_out.write(data)
```

:::tip

 `tarfile`  `tar`  `zstd` 

 `tarfile`  `zstd` 

```python showLineNumbers
import tarfile
from compression import zstd

def compress_folder(folder_path, output_file):
    """ .tar.zst"""
    # 1 tar 
    tar_file = "temp.tar"
    with tarfile.open(tar_file, 'w') as tar:
        tar.add(folder_path)
    
    # 2 zstd  tar 
    with open(tar_file, 'rb') as f_in:
        with zstd.open(output_file, 'wb', level=3) as f_out:
            f_out.write(f_in.read())
    
    # 
    import os
    os.remove(tar_file)


def decompress_folder(input_file, output_dir="."):
    """ .tar.zst """
    # 1 zstd
    tar_file = "temp.tar"
    with zstd.open(input_file, 'rb') as f_in:
        with open(tar_file, 'wb') as f_out:
            f_out.write(f_in.read())
    
    # 2 tar
    with tarfile.open(tar_file, 'r') as tar:
        tar.extractall(path=output_dir)
    
    # 
    import os
    os.remove(tar_file)
```
:::


### 

`compression.zstd.compress(data, level=None, options=None, zstd_dict=None)`


- `data`
- `level`0-19019


- 


```python showLineNumbers
from compression import zstd

def compress_bytes_data():
    """"""
    data = b"hello world" * 1000
    compressed = zstd.compress(data, level=3)
    decompressed = zstd.decompress(compressed)
    print(f": {len(data)} ")
    print(f": {len(compressed)} ")
    print(f": {data == decompressed}")
```