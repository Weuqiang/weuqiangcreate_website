"use strict";(globalThis.webpackChunkweuqiangcreate_website=globalThis.webpackChunkweuqiangcreate_website||[]).push([[5375],{66637(e,n,r){r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"\u4eba\u5de5\u667a\u80fd/MCP\u6df1\u5ea6\u6307\u5357","title":"MCP\u6df1\u5ea6\u6307\u5357","description":"\u638c\u63e1MCP\u534f\u8bae\u7684\u5b8c\u6574\u5b9e\u73b0\uff0c\u4ece\u57fa\u7840\u6982\u5ff5\u5230\u751f\u4ea7\u7ea7\u5e94\u7528\u5f00\u53d1\u3002","source":"@site/docs/docs/\u4eba\u5de5\u667a\u80fd/MCP\u6df1\u5ea6\u6307\u5357.mdx","sourceDirName":"\u4eba\u5de5\u667a\u80fd","slug":"/\u4eba\u5de5\u667a\u80fd/MCP\u6df1\u5ea6\u6307\u5357","permalink":"/weuqiangcreate_website/docs/\u4eba\u5de5\u667a\u80fd/MCP\u6df1\u5ea6\u6307\u5357","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":16,"frontMatter":{"sidebar_position":16,"title":"MCP\u6df1\u5ea6\u6307\u5357"},"sidebar":"tutorialSidebar","previous":{"title":"\u524d\u6cbfAI\u6280\u672f","permalink":"/weuqiangcreate_website/docs/\u4eba\u5de5\u667a\u80fd/\u524d\u6cbfAI\u6280\u672f"},"next":{"title":"OpenClaw\u5b9e\u6218\u6307\u5357","permalink":"/weuqiangcreate_website/docs/\u4eba\u5de5\u667a\u80fd/OpenClaw\u5b9e\u6218\u6307\u5357"}}');var t=r(74848),o=r(28453);const a={sidebar_position:16,title:"MCP\u6df1\u5ea6\u6307\u5357"},i="MCP (Model Context Protocol) \u6df1\u5ea6\u6307\u5357",l={},c=[{value:"MCP\u5b8c\u6574\u6280\u672f\u6587\u6863",id:"mcp\u5b8c\u6574\u6280\u672f\u6587\u6863",level:2},{value:"\u534f\u8bae\u89c4\u8303",id:"\u534f\u8bae\u89c4\u8303",level:3},{value:"\u6838\u5fc3\u6982\u5ff5\u8be6\u89e3",id:"\u6838\u5fc3\u6982\u5ff5\u8be6\u89e3",level:3},{value:"1. Resources\uff08\u8d44\u6e90\uff09",id:"1-resources\u8d44\u6e90",level:4},{value:"2. Tools\uff08\u5de5\u5177\uff09",id:"2-tools\u5de5\u5177",level:4},{value:"3. Prompts\uff08\u63d0\u793a\u6a21\u677f\uff09",id:"3-prompts\u63d0\u793a\u6a21\u677f",level:4},{value:"\u5b8c\u6574MCP Server\u5b9e\u73b0",id:"\u5b8c\u6574mcp-server\u5b9e\u73b0",level:3},{value:"\u5b9e\u6218\u6848\u4f8b1\uff1aGitHub MCP Server",id:"\u5b9e\u6218\u6848\u4f8b1github-mcp-server",level:2},{value:"\u5b9e\u6218\u6848\u4f8b2\uff1a\u6570\u636e\u5e93MCP Server",id:"\u5b9e\u6218\u6848\u4f8b2\u6570\u636e\u5e93mcp-server",level:2},{value:"\u5b9e\u6218\u6848\u4f8b3\uff1a\u5b8c\u6574\u7684AI\u5e94\u7528",id:"\u5b9e\u6218\u6848\u4f8b3\u5b8c\u6574\u7684ai\u5e94\u7528",level:2},{value:"\u5b66\u4e60\u8d44\u6e90",id:"\u5b66\u4e60\u8d44\u6e90",level:2},{value:"\u5b98\u65b9\u6587\u6863",id:"\u5b98\u65b9\u6587\u6863",level:3},{value:"\u793a\u4f8b\u9879\u76ee",id:"\u793a\u4f8b\u9879\u76ee",level:3},{value:"\u793e\u533a\u8d44\u6e90",id:"\u793e\u533a\u8d44\u6e90",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function p(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components},{DocCardList:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("DocCardList",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"mcp-model-context-protocol-\u6df1\u5ea6\u6307\u5357",children:"MCP (Model Context Protocol) \u6df1\u5ea6\u6307\u5357"})}),"\n",(0,t.jsx)(n.admonition,{title:"\u5b66\u4e60\u76ee\u6807",type:"info",children:(0,t.jsx)(n.p,{children:"\u638c\u63e1MCP\u534f\u8bae\u7684\u5b8c\u6574\u5b9e\u73b0\uff0c\u4ece\u57fa\u7840\u6982\u5ff5\u5230\u751f\u4ea7\u7ea7\u5e94\u7528\u5f00\u53d1\u3002"})}),"\n",(0,t.jsx)(n.h2,{id:"mcp\u5b8c\u6574\u6280\u672f\u6587\u6863",children:"MCP\u5b8c\u6574\u6280\u672f\u6587\u6863"}),"\n",(0,t.jsx)(n.h3,{id:"\u534f\u8bae\u89c4\u8303",children:"\u534f\u8bae\u89c4\u8303"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"MCP\u534f\u8bae\u7248\u672c"}),": 1.0.0",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"\u53d1\u5e03\u65f6\u95f4"}),": 2024\u5e7411\u6708",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"\u7ef4\u62a4\u8005"}),": Anthropic"]}),"\n",(0,t.jsx)(n.h3,{id:"\u6838\u5fc3\u6982\u5ff5\u8be6\u89e3",children:"\u6838\u5fc3\u6982\u5ff5\u8be6\u89e3"}),"\n",(0,t.jsx)(n.h4,{id:"1-resources\u8d44\u6e90",children:"1. Resources\uff08\u8d44\u6e90\uff09"}),"\n",(0,t.jsx)(n.p,{children:"\u8d44\u6e90\u662fAI\u53ef\u4ee5\u8bfb\u53d6\u7684\u6570\u636e\u6e90\uff0c\u7c7b\u4f3c\u4e8eREST API\u4e2d\u7684\u8d44\u6e90\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// \u8d44\u6e90\u5b9a\u4e49\uff08TypeScript\uff09\ninterface Resource {\n  uri: string;              // \u8d44\u6e90URI\uff0c\u5982 file://documents/readme.md\n  name: string;             // \u8d44\u6e90\u540d\u79f0\n  description?: string;     // \u8d44\u6e90\u63cf\u8ff0\n  mimeType?: string;        // MIME\u7c7b\u578b\n}\n\n// \u8d44\u6e90\u5185\u5bb9\ninterface ResourceContents {\n  uri: string;\n  mimeType?: string;\n  text?: string;            // \u6587\u672c\u5185\u5bb9\n  blob?: string;            // Base64\u7f16\u7801\u7684\u4e8c\u8fdb\u5236\u5185\u5bb9\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Python\u5b9e\u73b0"}),"\uff1a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from typing import Optional, Dict, Any\nfrom dataclasses import dataclass\nimport json\n\n@dataclass\nclass Resource:\n    """MCP\u8d44\u6e90"""\n    uri: str\n    name: str\n    description: Optional[str] = None\n    mime_type: Optional[str] = None\n    \n    def to_dict(self) -> Dict[str, Any]:\n        return {\n            "uri": self.uri,\n            "name": self.name,\n            "description": self.description,\n            "mimeType": self.mime_type\n        }\n\n\nclass ResourceManager:\n    """\u8d44\u6e90\u7ba1\u7406\u5668"""\n    \n    def __init__(self):\n        self.resources: Dict[str, Resource] = {}\n    \n    def register(self, resource: Resource):\n        """\u6ce8\u518c\u8d44\u6e90"""\n        self.resources[resource.uri] = resource\n    \n    def list_resources(self) -> list:\n        """\u5217\u51fa\u6240\u6709\u8d44\u6e90"""\n        return [r.to_dict() for r in self.resources.values()]\n    \n    def get_resource(self, uri: str) -> Optional[Resource]:\n        """\u83b7\u53d6\u8d44\u6e90"""\n        return self.resources.get(uri)\n    \n    async def read_resource(self, uri: str) -> Dict[str, Any]:\n        """\u8bfb\u53d6\u8d44\u6e90\u5185\u5bb9"""\n        resource = self.get_resource(uri)\n        if not resource:\n            raise ValueError(f"Resource not found: {uri}")\n        \n        # \u6839\u636eURI\u7c7b\u578b\u8bfb\u53d6\u5185\u5bb9\n        if uri.startswith("file://"):\n            return await self._read_file(uri)\n        elif uri.startswith("http://") or uri.startswith("https://"):\n            return await self._read_url(uri)\n        else:\n            raise ValueError(f"Unsupported URI scheme: {uri}")\n    \n    async def _read_file(self, uri: str) -> Dict[str, Any]:\n        """\u8bfb\u53d6\u6587\u4ef6"""\n        import aiofiles\n        \n        path = uri.replace("file://", "")\n        async with aiofiles.open(path, \'r\') as f:\n            content = await f.read()\n        \n        return {\n            "uri": uri,\n            "mimeType": "text/plain",\n            "text": content\n        }\n    \n    async def _read_url(self, uri: str) -> Dict[str, Any]:\n        """\u8bfb\u53d6URL"""\n        import aiohttp\n        \n        async with aiohttp.ClientSession() as session:\n            async with session.get(uri) as response:\n                content = await response.text()\n        \n        return {\n            "uri": uri,\n            "mimeType": response.headers.get("Content-Type", "text/plain"),\n            "text": content\n        }\n'})}),"\n",(0,t.jsx)(n.h4,{id:"2-tools\u5de5\u5177",children:"2. Tools\uff08\u5de5\u5177\uff09"}),"\n",(0,t.jsx)(n.p,{children:"\u5de5\u5177\u662fAI\u53ef\u4ee5\u8c03\u7528\u7684\u51fd\u6570\uff0c\u7c7b\u4f3c\u4e8e\u51fd\u6570\u8c03\u7528API\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from typing import Callable, Dict, Any, List\nfrom dataclasses import dataclass\nimport inspect\n\n@dataclass\nclass ToolParameter:\n    """\u5de5\u5177\u53c2\u6570"""\n    name: str\n    type: str\n    description: str\n    required: bool = True\n    enum: Optional[List[str]] = None\n\n\n@dataclass\nclass Tool:\n    """MCP\u5de5\u5177"""\n    name: str\n    description: str\n    parameters: List[ToolParameter]\n    handler: Callable\n    \n    def to_dict(self) -> Dict[str, Any]:\n        return {\n            "name": self.name,\n            "description": self.description,\n            "inputSchema": {\n                "type": "object",\n                "properties": {\n                    param.name: {\n                        "type": param.type,\n                        "description": param.description,\n                        **({"enum": param.enum} if param.enum else {})\n                    }\n                    for param in self.parameters\n                },\n                "required": [p.name for p in self.parameters if p.required]\n            }\n        }\n\n\nclass ToolRegistry:\n    """\u5de5\u5177\u6ce8\u518c\u8868"""\n    \n    def __init__(self):\n        self.tools: Dict[str, Tool] = {}\n    \n    def register(self, \n                 name: str,\n                 description: str,\n                 parameters: List[ToolParameter] = None):\n        """\u88c5\u9970\u5668\uff1a\u6ce8\u518c\u5de5\u5177"""\n        def decorator(func: Callable):\n            # \u81ea\u52a8\u63a8\u65ad\u53c2\u6570\n            if parameters is None:\n                sig = inspect.signature(func)\n                auto_params = []\n                for param_name, param in sig.parameters.items():\n                    if param_name == \'self\':\n                        continue\n                    auto_params.append(ToolParameter(\n                        name=param_name,\n                        type="string",  # \u7b80\u5316\u5904\u7406\n                        description=f"Parameter {param_name}",\n                        required=param.default == inspect.Parameter.empty\n                    ))\n                params = auto_params\n            else:\n                params = parameters\n            \n            tool = Tool(\n                name=name,\n                description=description,\n                parameters=params,\n                handler=func\n            )\n            self.tools[name] = tool\n            return func\n        \n        return decorator\n    \n    def list_tools(self) -> List[Dict[str, Any]]:\n        """\u5217\u51fa\u6240\u6709\u5de5\u5177"""\n        return [tool.to_dict() for tool in self.tools.values()]\n    \n    async def call_tool(self, name: str, arguments: Dict[str, Any]) -> Dict[str, Any]:\n        """\u8c03\u7528\u5de5\u5177"""\n        tool = self.tools.get(name)\n        if not tool:\n            raise ValueError(f"Tool not found: {name}")\n        \n        try:\n            # \u8c03\u7528\u5904\u7406\u51fd\u6570\n            if inspect.iscoroutinefunction(tool.handler):\n                result = await tool.handler(**arguments)\n            else:\n                result = tool.handler(**arguments)\n            \n            return {\n                "content": [\n                    {\n                        "type": "text",\n                        "text": str(result)\n                    }\n                ]\n            }\n        except Exception as e:\n            return {\n                "content": [\n                    {\n                        "type": "text",\n                        "text": f"Error: {str(e)}"\n                    }\n                ],\n                "isError": True\n            }\n'})}),"\n",(0,t.jsx)(n.h4,{id:"3-prompts\u63d0\u793a\u6a21\u677f",children:"3. Prompts\uff08\u63d0\u793a\u6a21\u677f\uff09"}),"\n",(0,t.jsx)(n.p,{children:"\u63d0\u793a\u6a21\u677f\u662f\u9884\u5b9a\u4e49\u7684prompt\uff0c\u53ef\u4ee5\u88abAI\u5e94\u7528\u91cd\u7528\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from typing import List, Dict, Any\n\n@dataclass\nclass PromptMessage:\n    """\u63d0\u793a\u6d88\u606f"""\n    role: str  # "user", "assistant", "system"\n    content: str\n\n\n@dataclass\nclass Prompt:\n    """MCP\u63d0\u793a"""\n    name: str\n    description: str\n    arguments: List[ToolParameter]\n    \n    def to_dict(self) -> Dict[str, Any]:\n        return {\n            "name": self.name,\n            "description": self.description,\n            "arguments": [\n                {\n                    "name": arg.name,\n                    "description": arg.description,\n                    "required": arg.required\n                }\n                for arg in self.arguments\n            ]\n        }\n\n\nclass PromptRegistry:\n    """\u63d0\u793a\u6ce8\u518c\u8868"""\n    \n    def __init__(self):\n        self.prompts: Dict[str, Prompt] = {}\n        self.generators: Dict[str, Callable] = {}\n    \n    def register(self,\n                 name: str,\n                 description: str,\n                 arguments: List[ToolParameter] = None):\n        """\u88c5\u9970\u5668\uff1a\u6ce8\u518c\u63d0\u793a"""\n        def decorator(func: Callable):\n            prompt = Prompt(\n                name=name,\n                description=description,\n                arguments=arguments or []\n            )\n            self.prompts[name] = prompt\n            self.generators[name] = func\n            return func\n        \n        return decorator\n    \n    def list_prompts(self) -> List[Dict[str, Any]]:\n        """\u5217\u51fa\u6240\u6709\u63d0\u793a"""\n        return [prompt.to_dict() for prompt in self.prompts.values()]\n    \n    async def get_prompt(self, name: str, arguments: Dict[str, Any]) -> Dict[str, Any]:\n        """\u83b7\u53d6\u63d0\u793a"""\n        if name not in self.generators:\n            raise ValueError(f"Prompt not found: {name}")\n        \n        generator = self.generators[name]\n        \n        # \u751f\u6210\u6d88\u606f\n        if inspect.iscoroutinefunction(generator):\n            messages = await generator(**arguments)\n        else:\n            messages = generator(**arguments)\n        \n        return {\n            "messages": [\n                {\n                    "role": msg.role,\n                    "content": {\n                        "type": "text",\n                        "text": msg.content\n                    }\n                }\n                for msg in messages\n            ]\n        }\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u5b8c\u6574mcp-server\u5b9e\u73b0",children:"\u5b8c\u6574MCP Server\u5b9e\u73b0"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import asyncio\nfrom typing import Optional\nimport json\n\nclass MCPServer:\n    """\u5b8c\u6574\u7684MCP\u670d\u52a1\u5668\u5b9e\u73b0"""\n    \n    def __init__(self, name: str, version: str = "1.0.0"):\n        self.name = name\n        self.version = version\n        \n        # \u6ce8\u518c\u8868\n        self.resources = ResourceManager()\n        self.tools = ToolRegistry()\n        self.prompts = PromptRegistry()\n        \n        # \u8fde\u63a5\u7ba1\u7406\n        self.clients = set()\n    \n    async def handle_request(self, request: Dict[str, Any]) -> Dict[str, Any]:\n        """\u5904\u7406\u5ba2\u6237\u7aef\u8bf7\u6c42"""\n        method = request.get("method")\n        params = request.get("params", {})\n        \n        try:\n            if method == "initialize":\n                return await self._handle_initialize(params)\n            elif method == "resources/list":\n                return {"resources": self.resources.list_resources()}\n            elif method == "resources/read":\n                uri = params.get("uri")\n                content = await self.resources.read_resource(uri)\n                return {"contents": [content]}\n            elif method == "tools/list":\n                return {"tools": self.tools.list_tools()}\n            elif method == "tools/call":\n                name = params.get("name")\n                arguments = params.get("arguments", {})\n                result = await self.tools.call_tool(name, arguments)\n                return result\n            elif method == "prompts/list":\n                return {"prompts": self.prompts.list_prompts()}\n            elif method == "prompts/get":\n                name = params.get("name")\n                arguments = params.get("arguments", {})\n                result = await self.prompts.get_prompt(name, arguments)\n                return result\n            else:\n                raise ValueError(f"Unknown method: {method}")\n        \n        except Exception as e:\n            return {\n                "error": {\n                    "code": -32603,\n                    "message": str(e)\n                }\n            }\n    \n    async def _handle_initialize(self, params: Dict[str, Any]) -> Dict[str, Any]:\n        """\u5904\u7406\u521d\u59cb\u5316\u8bf7\u6c42"""\n        return {\n            "protocolVersion": "1.0.0",\n            "serverInfo": {\n                "name": self.name,\n                "version": self.version\n            },\n            "capabilities": {\n                "resources": {},\n                "tools": {},\n                "prompts": {}\n            }\n        }\n    \n    async def run(self, host: str = "localhost", port: int = 8000):\n        """\u8fd0\u884c\u670d\u52a1\u5668"""\n        from aiohttp import web\n        \n        async def handle_http(request):\n            """\u5904\u7406HTTP\u8bf7\u6c42"""\n            data = await request.json()\n            response = await self.handle_request(data)\n            return web.json_response(response)\n        \n        app = web.Application()\n        app.router.add_post(\'/mcp\', handle_http)\n        \n        runner = web.AppRunner(app)\n        await runner.setup()\n        site = web.TCPSite(runner, host, port)\n        \n        print(f"MCP Server running on http://{host}:{port}")\n        await site.start()\n        \n        # \u4fdd\u6301\u8fd0\u884c\n        await asyncio.Event().wait()\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u5b9e\u6218\u6848\u4f8b1github-mcp-server",children:"\u5b9e\u6218\u6848\u4f8b1\uff1aGitHub MCP Server"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import aiohttp\nfrom typing import List, Dict, Any\n\nclass GitHubMCPServer(MCPServer):\n    """GitHub MCP\u670d\u52a1\u5668"""\n    \n    def __init__(self, token: str):\n        super().__init__("github-mcp-server")\n        self.token = token\n        self.base_url = "https://api.github.com"\n        \n        self._register_resources()\n        self._register_tools()\n    \n    def _register_resources(self):\n        """\u6ce8\u518cGitHub\u8d44\u6e90"""\n        # \u6ce8\u518c\u4ed3\u5e93\u5217\u8868\u8d44\u6e90\n        self.resources.register(Resource(\n            uri="github://repos",\n            name="repositories",\n            description="List of user repositories",\n            mime_type="application/json"\n        ))\n    \n    def _register_tools(self):\n        """\u6ce8\u518cGitHub\u5de5\u5177"""\n        \n        @self.tools.register(\n            name="search_repositories",\n            description="Search GitHub repositories",\n            parameters=[\n                ToolParameter("query", "string", "Search query", required=True),\n                ToolParameter("sort", "string", "Sort by", required=False,\n                            enum=["stars", "forks", "updated"])\n            ]\n        )\n        async def search_repos(query: str, sort: str = "stars"):\n            """\u641c\u7d22\u4ed3\u5e93"""\n            async with aiohttp.ClientSession() as session:\n                headers = {"Authorization": f"token {self.token}"}\n                params = {"q": query, "sort": sort}\n                \n                async with session.get(\n                    f"{self.base_url}/search/repositories",\n                    headers=headers,\n                    params=params\n                ) as response:\n                    data = await response.json()\n                    \n                    repos = data.get("items", [])\n                    result = "\\n".join([\n                        f"- {repo[\'full_name\']} \u2b50{repo[\'stargazers_count\']}"\n                        for repo in repos[:10]\n                    ])\n                    \n                    return result\n        \n        @self.tools.register(\n            name="create_issue",\n            description="Create a GitHub issue",\n            parameters=[\n                ToolParameter("repo", "string", "Repository (owner/name)", required=True),\n                ToolParameter("title", "string", "Issue title", required=True),\n                ToolParameter("body", "string", "Issue body", required=False)\n            ]\n        )\n        async def create_issue(repo: str, title: str, body: str = ""):\n            """\u521b\u5efaIssue"""\n            async with aiohttp.ClientSession() as session:\n                headers = {\n                    "Authorization": f"token {self.token}",\n                    "Accept": "application/vnd.github.v3+json"\n                }\n                data = {"title": title, "body": body}\n                \n                async with session.post(\n                    f"{self.base_url}/repos/{repo}/issues",\n                    headers=headers,\n                    json=data\n                ) as response:\n                    result = await response.json()\n                    return f"Created issue #{result[\'number\']}: {result[\'html_url\']}"\n        \n        @self.tools.register(\n            name="get_file_content",\n            description="Get file content from repository",\n            parameters=[\n                ToolParameter("repo", "string", "Repository (owner/name)", required=True),\n                ToolParameter("path", "string", "File path", required=True),\n                ToolParameter("branch", "string", "Branch name", required=False)\n            ]\n        )\n        async def get_file(repo: str, path: str, branch: str = "main"):\n            """\u83b7\u53d6\u6587\u4ef6\u5185\u5bb9"""\n            async with aiohttp.ClientSession() as session:\n                headers = {"Authorization": f"token {self.token}"}\n                \n                async with session.get(\n                    f"{self.base_url}/repos/{repo}/contents/{path}",\n                    headers=headers,\n                    params={"ref": branch}\n                ) as response:\n                    data = await response.json()\n                    \n                    import base64\n                    content = base64.b64decode(data["content"]).decode()\n                    return content\n\n# \u4f7f\u7528\u793a\u4f8b\nasync def main():\n    server = GitHubMCPServer(token="your_github_token")\n    await server.run()\n\nif __name__ == "__main__":\n    asyncio.run(main())\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u5b9e\u6218\u6848\u4f8b2\u6570\u636e\u5e93mcp-server",children:"\u5b9e\u6218\u6848\u4f8b2\uff1a\u6570\u636e\u5e93MCP Server"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import asyncpg\nfrom typing import List, Dict, Any\n\nclass DatabaseMCPServer(MCPServer):\n    """\u6570\u636e\u5e93MCP\u670d\u52a1\u5668"""\n    \n    def __init__(self, db_url: str):\n        super().__init__("database-mcp-server")\n        self.db_url = db_url\n        self.pool = None\n        \n        self._register_tools()\n        self._register_prompts()\n    \n    async def initialize(self):\n        """\u521d\u59cb\u5316\u6570\u636e\u5e93\u8fde\u63a5\u6c60"""\n        self.pool = await asyncpg.create_pool(self.db_url)\n    \n    def _register_tools(self):\n        """\u6ce8\u518c\u6570\u636e\u5e93\u5de5\u5177"""\n        \n        @self.tools.register(\n            name="query",\n            description="Execute SQL query",\n            parameters=[\n                ToolParameter("sql", "string", "SQL query", required=True),\n                ToolParameter("params", "array", "Query parameters", required=False)\n            ]\n        )\n        async def execute_query(sql: str, params: List = None):\n            """\u6267\u884c\u67e5\u8be2"""\n            async with self.pool.acquire() as conn:\n                if params:\n                    rows = await conn.fetch(sql, *params)\n                else:\n                    rows = await conn.fetch(sql)\n                \n                # \u8f6c\u6362\u4e3a\u5b57\u5178\u5217\u8868\n                result = [dict(row) for row in rows]\n                return json.dumps(result, indent=2, default=str)\n        \n        @self.tools.register(\n            name="list_tables",\n            description="List all tables in database"\n        )\n        async def list_tables():\n            """\u5217\u51fa\u6240\u6709\u8868"""\n            sql = """\n                SELECT table_name \n                FROM information_schema.tables \n                WHERE table_schema = \'public\'\n            """\n            async with self.pool.acquire() as conn:\n                rows = await conn.fetch(sql)\n                tables = [row[\'table_name\'] for row in rows]\n                return "\\n".join(tables)\n        \n        @self.tools.register(\n            name="describe_table",\n            description="Describe table schema",\n            parameters=[\n                ToolParameter("table", "string", "Table name", required=True)\n            ]\n        )\n        async def describe_table(table: str):\n            """\u63cf\u8ff0\u8868\u7ed3\u6784"""\n            sql = """\n                SELECT column_name, data_type, is_nullable\n                FROM information_schema.columns\n                WHERE table_name = $1\n            """\n            async with self.pool.acquire() as conn:\n                rows = await conn.fetch(sql, table)\n                \n                result = f"Table: {table}\\n\\n"\n                for row in rows:\n                    result += f"- {row[\'column_name\']}: {row[\'data_type\']}"\n                    if row[\'is_nullable\'] == \'NO\':\n                        result += " NOT NULL"\n                    result += "\\n"\n                \n                return result\n    \n    def _register_prompts(self):\n        """\u6ce8\u518cSQL\u63d0\u793a\u6a21\u677f"""\n        \n        @self.prompts.register(\n            name="generate_sql",\n            description="Generate SQL query from natural language",\n            arguments=[\n                ToolParameter("description", "string", "Query description", required=True),\n                ToolParameter("table", "string", "Table name", required=True)\n            ]\n        )\n        async def generate_sql(description: str, table: str):\n            """\u751f\u6210SQL\u67e5\u8be2"""\n            # \u83b7\u53d6\u8868\u7ed3\u6784\n            schema = await self.tools.call_tool("describe_table", {"table": table})\n            \n            return [\n                PromptMessage(\n                    role="system",\n                    content="You are a SQL expert. Generate SQL queries based on natural language descriptions."\n                ),\n                PromptMessage(\n                    role="user",\n                    content=f"""Table schema:\n{schema}\n\nGenerate a SQL query for: {description}\n\nReturn only the SQL query, no explanations."""\n                )\n            ]\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u5b9e\u6218\u6848\u4f8b3\u5b8c\u6574\u7684ai\u5e94\u7528",children:"\u5b9e\u6218\u6848\u4f8b3\uff1a\u5b8c\u6574\u7684AI\u5e94\u7528"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from openai import AsyncOpenAI\n\nclass AIAssistant:\n    """\u57fa\u4e8eMCP\u7684AI\u52a9\u624b"""\n    \n    def __init__(self, mcp_servers: List[MCPServer]):\n        self.client = AsyncOpenAI()\n        self.mcp_servers = mcp_servers\n        self.conversation_history = []\n    \n    async def initialize(self):\n        """\u521d\u59cb\u5316\u6240\u6709MCP\u670d\u52a1\u5668"""\n        self.available_tools = []\n        \n        for server in self.mcp_servers:\n            tools = server.tools.list_tools()\n            self.available_tools.extend(tools)\n    \n    async def chat(self, user_message: str) -> str:\n        """\u5bf9\u8bdd"""\n        # \u6dfb\u52a0\u7528\u6237\u6d88\u606f\n        self.conversation_history.append({\n            "role": "user",\n            "content": user_message\n        })\n        \n        # \u8c03\u7528LLM\n        response = await self.client.chat.completions.create(\n            model="gpt-4",\n            messages=self.conversation_history,\n            tools=self.available_tools,\n            tool_choice="auto"\n        )\n        \n        message = response.choices[0].message\n        \n        # \u5904\u7406\u5de5\u5177\u8c03\u7528\n        if message.tool_calls:\n            for tool_call in message.tool_calls:\n                tool_name = tool_call.function.name\n                arguments = json.loads(tool_call.function.arguments)\n                \n                # \u627e\u5230\u5bf9\u5e94\u7684MCP\u670d\u52a1\u5668\u5e76\u8c03\u7528\u5de5\u5177\n                result = await self._call_mcp_tool(tool_name, arguments)\n                \n                # \u6dfb\u52a0\u5de5\u5177\u8c03\u7528\u7ed3\u679c\n                self.conversation_history.append({\n                    "role": "tool",\n                    "tool_call_id": tool_call.id,\n                    "content": result\n                })\n            \n            # \u518d\u6b21\u8c03\u7528LLM\u83b7\u53d6\u6700\u7ec8\u54cd\u5e94\n            response = await self.client.chat.completions.create(\n                model="gpt-4",\n                messages=self.conversation_history\n            )\n            message = response.choices[0].message\n        \n        # \u6dfb\u52a0\u52a9\u624b\u54cd\u5e94\n        self.conversation_history.append({\n            "role": "assistant",\n            "content": message.content\n        })\n        \n        return message.content\n    \n    async def _call_mcp_tool(self, tool_name: str, arguments: Dict) -> str:\n        """\u8c03\u7528MCP\u5de5\u5177"""\n        for server in self.mcp_servers:\n            if tool_name in server.tools.tools:\n                result = await server.tools.call_tool(tool_name, arguments)\n                return result["content"][0]["text"]\n        \n        return f"Tool {tool_name} not found"\n\n# \u4f7f\u7528\u793a\u4f8b\nasync def main():\n    # \u521b\u5efaMCP\u670d\u52a1\u5668\n    github_server = GitHubMCPServer(token="your_token")\n    db_server = DatabaseMCPServer(db_url="postgresql://...")\n    await db_server.initialize()\n    \n    # \u521b\u5efaAI\u52a9\u624b\n    assistant = AIAssistant([github_server, db_server])\n    await assistant.initialize()\n    \n    # \u5bf9\u8bdd\n    response = await assistant.chat(\n        "Search for popular Python repositories and save the top 5 to database"\n    )\n    print(response)\n\nif __name__ == "__main__":\n    asyncio.run(main())\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u5b66\u4e60\u8d44\u6e90",children:"\u5b66\u4e60\u8d44\u6e90"}),"\n",(0,t.jsx)(n.h3,{id:"\u5b98\u65b9\u6587\u6863",children:"\u5b98\u65b9\u6587\u6863"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["MCP\u89c4\u8303: ",(0,t.jsx)(n.a,{href:"https://spec.modelcontextprotocol.io/",children:"https://spec.modelcontextprotocol.io/"})]}),"\n",(0,t.jsxs)(n.li,{children:["GitHub\u4ed3\u5e93: ",(0,t.jsx)(n.a,{href:"https://github.com/modelcontextprotocol",children:"https://github.com/modelcontextprotocol"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u793a\u4f8b\u9879\u76ee",children:"\u793a\u4f8b\u9879\u76ee"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["MCP Servers: ",(0,t.jsx)(n.a,{href:"https://github.com/modelcontextprotocol/servers",children:"https://github.com/modelcontextprotocol/servers"})]}),"\n",(0,t.jsxs)(n.li,{children:["MCP Python SDK: ",(0,t.jsx)(n.a,{href:"https://github.com/modelcontextprotocol/python-sdk",children:"https://github.com/modelcontextprotocol/python-sdk"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u793e\u533a\u8d44\u6e90",children:"\u793e\u533a\u8d44\u6e90"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Discord\u793e\u533a"}),"\n",(0,t.jsx)(n.li,{children:"\u793a\u4f8b\u4ee3\u7801\u5e93"}),"\n",(0,t.jsx)(n.li,{children:"\u6700\u4f73\u5b9e\u8df5\u6307\u5357"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"MCP\u7684\u6838\u5fc3\u4ef7\u503c"}),"\uff1a"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"\u6807\u51c6\u5316AI\u5e94\u7528\u5f00\u53d1"}),"\n",(0,t.jsx)(n.li,{children:"\u53ef\u91cd\u7528\u7684\u5de5\u5177\u548c\u8d44\u6e90"}),"\n",(0,t.jsx)(n.li,{children:"\u5b89\u5168\u7684\u6743\u9650\u63a7\u5236"}),"\n",(0,t.jsx)(n.li,{children:"\u6613\u4e8e\u6269\u5c55\u548c\u96c6\u6210"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u5b66\u4e60\u8def\u5f84"}),"\uff1a"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"\u7406\u89e3Resources\u3001Tools\u3001Prompts\u4e09\u5927\u6982\u5ff5"}),"\n",(0,t.jsx)(n.li,{children:"\u5b9e\u73b0\u7b80\u5355\u7684MCP Server"}),"\n",(0,t.jsx)(n.li,{children:"\u96c6\u6210\u5230AI\u5e94\u7528\u4e2d"}),"\n",(0,t.jsx)(n.li,{children:"\u6784\u5efa\u751f\u4ea7\u7ea7MCP\u670d\u52a1"}),"\n"]}),"\n",(0,t.jsx)(r,{})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},28453(e,n,r){r.d(n,{R:()=>a,x:()=>i});var s=r(96540);const t={},o=s.createContext(t);function a(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);