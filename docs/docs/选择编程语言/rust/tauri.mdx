# Tauri

TauriRustAppElectronChromiunNodeTauriTauriWebView

## 

### 
- ****MBElectronMB
- ****WebViewChromium
- ****Electron

### 
- ****
- ****API
- **CSP**

### 
- **Windows**WebView2
- **macOS**WKWebView
- **Linux**WebKitGTK

## 

Tauri

- ****WebReactVueSvelte
- ****Rust
- ****IPC

## Setup

### 

```shell
# Rust
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# Linux
sudo apt update
sudo apt install libwebkit2gtk-4.0-dev build-essential curl wget libssl-dev libgtk-3-dev libayatana-appindicator3-dev librsvg2-dev

# macOS
brew install gtk+3
```

### 

```shell
# 
pnpm create tauri-app
# 
npm create tauri-app@latest
# 
yarn create tauri-app

# 
cd tauri-app

# 
pnpm install

# 
pnpm tauri dev
```

## 

```
tauri-app/
 src-tauri/          # Rust
    src/
       main.rs     # 
       lib.rs      # 
    Cargo.toml      # Rust
    tauri.conf.json # Tauri
    icons/          # 
 src/                # 
    main.js
    index.html
 package.json
 README.md
```

## API

### Command

Rust

```rust
// src-tauri/src/main.rs
use tauri::command;

#[command]
fn greet(name: &str) -> String {
    format!("Hello, {}! You've been greeted from Rust!", name)
}

#[command]
async fn async_greet(name: String) -> Result<String, String> {
    // 
    tokio::time::sleep(tokio::time::Duration::from_millis(1000)).await;
    Ok(format!("Hello, {}!", name))
}

fn main() {
    tauri::Builder::default()
        .invoke_handler(tauri::generate_handler![greet, async_greet])
        .run(tauri::generate_context!())
        .expect("error while running tauri application");
}
```



```javascript
// JavaScript
import { invoke } from '@tauri-apps/api/tauri';

// 
const greeting = await invoke('greet', { name: 'World' });
console.log(greeting); // "Hello, World! You've been greeted from Rust!"

// 
try {
    const result = await invoke('async_greet', { name: 'Tauri' });
    console.log(result);
} catch (error) {
    console.error('Error:', error);
}
```

### API

```javascript
import { readTextFile, writeTextFile, BaseDirectory } from '@tauri-apps/api/fs';

// 
const content = await readTextFile('app.conf', { dir: BaseDirectory.App });

// 
await writeTextFile('log.txt', 'Hello from Tauri!', { dir: BaseDirectory.App });
```

### 

```javascript
import { appWindow } from '@tauri-apps/api/window';

// 
await appWindow.minimize();

// 
await appWindow.maximize();

// 
await appWindow.close();

// 
await appWindow.setTitle('New Title');

// 
appWindow.listen('tauri://close-requested', () => {
    console.log('Window is about to close');
});
```

### 

```rust
// src-tauri/src/main.rs
use tauri::{CustomMenuItem, SystemTray, SystemTrayMenu, SystemTrayEvent};

fn main() {
    let quit = CustomMenuItem::new("quit".to_string(), "Quit");
    let hide = CustomMenuItem::new("hide".to_string(), "Hide");
    let tray_menu = SystemTrayMenu::new()
        .add_item(quit)
        .add_item(hide);
    let system_tray = SystemTray::new().with_menu(tray_menu);

    tauri::Builder::default()
        .system_tray(system_tray)
        .on_system_tray_event(|app, event| match event {
            SystemTrayEvent::LeftClick {
                position: _,
                size: _,
                ..
            } => {
                println!("system tray received a left click");
            }
            SystemTrayEvent::MenuItemClick { id, .. } => {
                match id.as_str() {
                    "quit" => {
                        std::process::exit(0);
                    }
                    "hide" => {
                        let window = app.get_window("main").unwrap();
                        window.hide().unwrap();
                    }
                    _ => {}
                }
            }
            _ => {}
        })
        .run(tauri::generate_context!())
        .expect("error while running tauri application");
}
```

### 

```javascript
import { sendNotification } from '@tauri-apps/api/notification';

// 
sendNotification({
    title: 'Tauri App',
    body: 'This is a notification from Tauri!',
    icon: 'icon.png'
});
```

## 

### tauri.conf.json

```json
{
  "build": {
    "beforeDevCommand": "npm run dev",
    "beforeBuildCommand": "npm run build",
    "devPath": "http://localhost:1420",
    "distDir": "../dist"
  },
  "package": {
    "productName": "tauri-app",
    "version": "0.0.0"
  },
  "tauri": {
    "allowlist": {
      "all": false,
      "shell": {
        "all": false,
        "open": true
      },
      "fs": {
        "all": true,
        "readFile": true,
        "writeFile": true,
        "scope": ["$APP/*"]
      }
    },
    "bundle": {
      "active": true,
      "targets": "all",
      "identifier": "com.tauri.dev",
      "icon": [
        "icons/32x32.png",
        "icons/128x128.png",
        "icons/icon.icns",
        "icons/icon.ico"
      ]
    },
    "security": {
      "csp": null
    },
    "windows": [
      {
        "fullscreen": false,
        "resizable": true,
        "title": "tauri-app",
        "width": 800,
        "height": 600
      }
    ]
  }
}
```

## Build

### 

```shell
# 
pnpm tauri dev

# 
pnpm tauri info
```

### 

```shell
# 
pnpm tauri build

# 
pnpm tauri build --target x86_64-pc-windows-msvc

# 
pnpm tauri build --debug
```

### 


- **Windows**: `src-tauri/target/release/bundle/msi/`
- **macOS**: `src-tauri/target/release/bundle/dmg/`
- **Linux**: `src-tauri/target/release/bundle/deb/`  `appimage/`

## 

### 1. 

```json
{
  "tauri": {
    "allowlist": {
      "all": false,
      "fs": {
        "scope": ["$APP/*", "$DOCUMENT/*"]
      }
    },
    "security": {
      "csp": "default-src 'self'; script-src 'self' 'unsafe-inline'"
    }
  }
}
```

### 2. 

```rust
#[command]
fn risky_operation() -> Result<String, String> {
    match std::fs::read_to_string("important.txt") {
        Ok(content) => Ok(content),
        Err(e) => Err(format!("Failed to read file: {}", e))
    }
}
```

### 3. 

```rust
use tauri::State;
use std::sync::Mutex;

struct AppState {
    counter: Mutex<i32>,
}

#[command]
fn increment_counter(state: State<AppState>) -> i32 {
    let mut counter = state.counter.lock().unwrap();
    *counter += 1;
    *counter
}

fn main() {
    tauri::Builder::default()
        .manage(AppState {
            counter: Mutex::new(0),
        })
        .invoke_handler(tauri::generate_handler![increment_counter])
        .run(tauri::generate_context!())
        .expect("error while running tauri application");
}
```

## Electron

|  | Tauri | Electron |
|------|-------|----------|
|  | 3-15MB | 100-200MB |
|  |  |  |
|  |  |  |
|  |  |  |
|  |  |  |
|  | Rust |  |
|  |  |  |



