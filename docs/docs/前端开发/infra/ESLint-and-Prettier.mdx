# ESLint And Prettier 
## ESLint

``` shell
npm i eslint -D

npx eslint --init # 
npx eslint index.js # 
npx eslint indexjs --fix # 
```

### 

`eslint``eslint-config-``eslint-plugin-``extends``plugins`

> 
>
> ``` json
> {
>   "extends": ["@akara/test", "prettier"], // @akara/eslint-config-test eslint-config-prettier
>   "plugins": ["@akara"] // @akara/eslint-plugin
> }
> ```



##### [extends](https://eslint.org/docs/user-guide/configuring/configuration-files#adding-shared-settings)



1. `eslint``eslint:recommended``eslint:all`
2. `eslint-config-*`
3. `eslint-plugin-*`

``` json
{
  "extends": [
    "eslint:recommended",
    "plugin:@typescript-eslint/recommended", // @typescript-eslint/eslint-plugin
    "prettier" // eslint-config-prettier
  ]
}
```



##### parser

```eslint``espree``TS``@typescript-eslint/parser`

``` bash
npm i --save-dev typescript @typescript-eslint/parser @typescript-eslint/eslint-plugin
```

``` js
module.exports = {
    "extends": [
        "eslint:recommended",
        "plugin:@typescript-eslint/recommended"
    ],
    "parser": "@typescript-eslint/parser",
    "plugins": [
        "@typescript-eslint"
    ],
};

```

##### parserOptions

`espree`

``` json
{
  "parserOptions": {
    "ecmaVersion": 12,
    "sourceType": "module",
    "ecmaFeature": {
      "jsx": true
    }
  }
}
```

###### ecmaVersion

>  set to 3, 5 (default), 6, 7, 8, 9, 10, 11, or 12 to specify the version of ECMAScript syntax you want to use. You can also set to 2015 (same as 6), 2016 (same as 7), 2017 (same as 8), 2018 (same as 9), 2019 (same as 10), 2020 (same as 11), or 2021 (same as 12) to use the year-based naming. You can also set "latest" to use the most recently supported version.

###### sourceType

> set to `"script"` (default) or `"module"` if your code is in ECMAScript modules.

`import``export``module`

###### ecmaFeature

>  an object indicating which additional language features you'd like to use:
>
> - `globalReturn` - allow `return` statements in the global scope
> - `impliedStrict` - enable global [strict mode](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode) (if `ecmaVersion` is 5 or greater)
> - `jsx` - enable [JSX](https://facebook.github.io/jsx/)

`eslint-plugin-react``JSX``true`

``` json
{
    "parserOptions": {
        "ecmaFeature": {
            "jsx": true
        }
    },
    "extends": [
        "plugin:react/recommended"
    ],
}
```

> If you do not use a preset you will need to specify individual rules and add extra configuration.
>
> ``` json
> {
>   "parserOptions": {
>     "ecmaFeatures": {
>       "jsx": true
>     }
>   },
>   "plugins": [
>     "react"
>   ],
>   "rules": {
>     // 
>   }
> }
> ```



##### env



``` json
{
  "env": {
    "browser": true,
    "commonjs": true,
    "es2021": true
  }
}
```

###### browser

`window`



###### node

`process`node



###### commonjs

> CommonJS global variables and CommonJS scoping (use this for browser-only code that uses Browserify/WebPack).

`module`



###### es2021

``` json
{
  "env": {
    "es2021": true
  }
}
```

> supporting ES6 syntax is not the same as supporting new ES6 globals (e.g., new types such as `Set`). For ES6 syntax, use `{ "parserOptions": { "ecmaVersion": 6 } }`; for new ES6 global variables, use `{ "env": { "es6": true } }`. `{ "env": { "es6": true } }` enables ES6 syntax automatically, but `{ "parserOptions": { "ecmaVersion": 6 } }` does not enable ES6 globals automatically.

##### globals



``` json
{
  "globals": {
        "Promise": 'off'
  },
}
```



##### plugins



###### @typescript-eslint/eslint-plugin

###### eslint-plugin-react

`ecmaFeature.JSX``react`

###### eslint-plugin-react-hooks

`hook``useCallback`

###### eslint-plugin-prettier

`prettier``eslint`

##### rules

`eslint``off``warn``error`

``` js
module.exports = {
    "rules": {
        "quotes": ["warn", "double"], // 
        "semi": ["error", "always"] //  
    }
}
```



## Prettier

``` shell
npm i prettier -D
prettier filename # 
prettier filename --check # 
prettier filename --write # 
```

`prettier`

``` js
// prettier.config.js or .prettierrc.js
module.exports = {
   // 
   semi: false,
   // 
   singleQuote: true,
   useTabs: false,
   // 
   tabWidth: 4,
   //  
   arrowParens: 'always',
   printWidth: 120,
}
```





## ESLint With Prettier

`Prettier``ESLint``ESLint``Prettier`



- `prettier-eslint`

  `prettier``ESLint --fix``Prettier``ESlint`

  ``` bash
  npm install -D prettier-eslint prettier-eslint-cli
  npx prettier-eslint index.js
  ```

- `eslint-config-prettier` + `eslint-plugin-prettier`

  `eslint-config-prettier``ESLint``ESLint``eslint-plugin-prettier``prettier``ESLint`

  > 

  ```bash
  npm install -D eslint-config-prettier eslint-plugin-prettier
  ```

  ``` json
  // .eslintrc.json
  {
      "extends": ["prettier"], // eslint-config-prettier
      "plugins": ["prettier"], //  eslint-plugin-prettier
      "rules": {
          "prettier/prettier": "error" //  eslint-plugin-prettier
      }
  }
  ```

  > `extends``prettier`

  `eslint-plugin-prettier`

  ``` json
  // .eslintrc.json
  {
    "extends": ["plugin:prettier/recommended"]
  }
  ```

  `.eslintrc.js``.prettierrc.js`

  `eslint``prettier``VSCode``ESLint`********

  ``` json
  // .vscode/setting.json
  "editor.codeActionsOnSave": {
      "source.fixAll": true,
  },
  ```



## CommitLint

`commit message``commitlint`

``` bash
npm i -D @commitlint/cli @commitlint/config-conventional
```

``` js
// commitlint.config.js
module.exports = {
	extends: ['@commitlint/config-conventional']
}
```

`commitlint`

``` bash
echo 'chore: nothing' | npx commitlint
```

`husky``CommitLint`

``` js
npx husky add .husky/commit-msg 'npx --no-install commitlint --edit $1'
git commit -m 'chore: nothing'
```



``` json
[
  'build', // 
  'chore', // 
  'ci', // ci
  'docs', // 
  'feat', // 
  'fix', // bug
  'perf', // 
  'refactor', // 
  'revert', // 
  'style', // 
  'test' // 
]
```





## Husky

`eslint``prettier`VSCode****************`commit message`****

`git``hooks``.git/hook/pre-commit``.git``Husky``git hook`

``` bash
npm install husky -D
npx husky install # .huskygit hooks
npm set-script prepare "husky install" # husky
npx husky add .husky/pre-commit "eslint --fix"
npx husky add .husky/commit-msg "commitlint"
```

`git hook``.git/hooks``git``core/hooksPath``hooks``npx husky install``.husky``hooks`

> Husky`.huskyrc``package.json` [Why husky has dropped conventional JS config](https://blog.typicode.com/husky-git-hooks-javascript-config/)



## Lint-Staged

`Husky``ESLint``ESLint``staged``git add``Lint-Staged`

``` json
{
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged"
    }
  },
  "lint-staged": {
    "*.js": "eslint --cache --fix",
    "*.{js,css,md}": "prettier --write"
  }
}
```













