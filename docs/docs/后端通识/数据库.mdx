---
sidebar_position: 8
title: 
---

:::info

:::

## SQL

SQLSQL90%

****
- <Highlight color="g">[SQLBolt](https://sqlbolt.com/) - SQL1-2</Highlight>
- [W3Schools SQL](https://www.w3schools.com/sql/) - 
- [LeetCode](https://leetcode.com/problemset/database/) - 

**SQL**
```sql
-- 
SELECT * FROM table WHERE condition ORDER BY column LIMIT 10;

-- 
INSERT INTO table (col1, col2) VALUES (val1, val2);

-- 
UPDATE table SET col1 = val1 WHERE condition;

-- 
DELETE FROM table WHERE condition;

-- 
SELECT * FROM table1 JOIN table2 ON table1.id = table2.id;
```

## 

###  - PostgreSQL

<Highlight color="g">**pgvector**</Highlight>

****
- JSON
- **pgvector**
- ACID
- 

****
```sql
-- pgvector
CREATE EXTENSION vector;

-- 
CREATE TABLE embeddings (
  id serial PRIMARY KEY,
  text text,
  embedding vector(1536)  -- OpenAI embedding
);

-- 
SELECT text FROM embeddings 
ORDER BY embedding <-> '[0.1,0.2,...]'::vector 
LIMIT 5;
```

****
- [PostgreSQL](https://www.postgresql.org/docs/)
- [pgvector GitHub](https://github.com/pgvector/pgvector)

---

###  - MongoDB

<Highlight color="g">****</Highlight>

****
- JSONschema
- 
- 

****
- 
- 
- 

**Python**
```python
from pymongo import MongoClient

client = MongoClient('mongodb://localhost:27017/')
db = client['ai_app']

# 
db.conversations.insert_one({
    'user_id': 'user123',
    'messages': [
        {'role': 'user', 'content': ''},
        {'role': 'assistant', 'content': ''}
    ],
    'timestamp': '2024-01-01'
})
```

---

###  - Redis

<Highlight color="g">****</Highlight>

****
- 
- StringListSetHashSorted Set
- API

****
|  |  |  |
|------|------|-----------|
| String |  | Token |
| Hash |  |  |
| List |  |  |
| Sorted Set |  |  |

**Python**
```python
import redis

r = redis.Redis(host='localhost', port=6379)

# 
r.setex('cache:key123', 3600, '')  # 1

# 
cached = r.get('cache:key123')
```

****
- **RDB**
- **AOF**

---

## 

<Highlight color="g">**Embedding**</Highlight>



### 

embedding

****
- 512-4096
- 
- 

### 

|  |  |  |  |
|-------|------|------|---------|
| **pgvector** | PostgreSQL | SQL |  |
| **Pinecone** |  |  |  |
| **Milvus** |  |  |  |
| **Chroma** |  |  |  |
| **Qdrant** |  | Rust |  |

### pgvector

```python
import psycopg2
from openai import OpenAI

# 
conn = psycopg2.connect("dbname=mydb user=myuser")
cur = conn.cursor()

# embedding
client = OpenAI()
text = ""
response = client.embeddings.create(
    model="text-embedding-3-small",
    input=text
)
embedding = response.data[0].embedding

# 
cur.execute(
    "INSERT INTO documents (content, embedding) VALUES (%s, %s)",
    (text, embedding)
)

# 5
query_embedding = client.embeddings.create(
    model="text-embedding-3-small",
    input="AI"
).data[0].embedding

cur.execute("""
    SELECT content, embedding <-> %s::vector AS distance
    FROM documents
    ORDER BY distance
    LIMIT 5
""", (query_embedding,))

results = cur.fetchall()
for content, distance in results:
    print(f"{content} (: {1-distance:.3f})")
```

---

## 

### ACID vs BASE

**ACID**
- **A**tomicity - 
- **C**onsistency - 
- **I**solation - 
- **D**urability - 

**BASE**NoSQL
- **B**asically Available
- **S**oft-state
- **E**ventually Consistent

### 

|  |  |  |  |  |
|---------|-----|-----------|------|-----|
| Read Uncommitted |  |  |  |  |
| Read Committed |  |  |  |  |
| Repeatable ReadMySQL |  |  |  |  |
| Serializable |  |  |  |  |

:::tip 
- **Read Committed**
- **Repeatable Read**
- ****NoSQL
:::

---

## 

### 

|  |  |  |
|---------|-----------|------|
| **** | PostgreSQL + pgvector |  +  |
| **** | MongoDB + Redis | schema + Redis |
| **** | Redis + PostgreSQL | Redis + PG |
| **** | Elasticsearch/Milvus |  |
| **** | PostgreSQL |  +  |
| **** | Redis |  |

### 

```

  ↓

    →  < 100
             → pgvector
             → Milvus/Qdrant
  
    → 
              → 
                      → PostgreSQL
                      → SQLite
            
              → /
                       → Redis
                       → MongoDB
```

### 



1. <Highlight color="g">****PostgreSQLpgvector+ Redis</Highlight>
2. ****MongoDBPinecone/Chroma
3. ****MySQLSQLite

:::info 
- **2**SQLBolt SQL
- **** PostgreSQL + pgvector
- **1**
- ****


:::

### 

- <Highlight color="g">[SQLBolt](https://sqlbolt.com/) - SQL</Highlight>
- [PostgreSQL](https://www.postgresql.org/docs/)
- [pgvector GitHub](https://github.com/pgvector/pgvector)
- [Redis](https://redis.io/docs/)
- [MongoDB University](https://university.mongodb.com/) - 
- [Pinecone](https://docs.pinecone.io/) - 
